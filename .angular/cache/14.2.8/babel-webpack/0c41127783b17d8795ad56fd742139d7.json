{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\"); // Signature bytes for each response message type\n\n\nvar SUCCESS = 0x70; // 0111 0000 // SUCCESS <metadata>\n\nvar RECORD = 0x71; // 0111 0001 // RECORD <value>\n\nvar IGNORED = 0x7e; // 0111 1110 // IGNORED <metadata>\n\nvar FAILURE = 0x7f; // 0111 1111 // FAILURE <metadata>\n\nfunction NO_OP() {}\n\nfunction NO_OP_IDENTITY(subject) {\n  return subject;\n}\n\nvar NO_OP_OBSERVER = {\n  onNext: NO_OP,\n  onCompleted: NO_OP,\n  onError: NO_OP\n};\n/**\n * Treat the protocol responses and notify the observers\n */\n\nvar ResponseHandler =\n/** @class */\nfunction () {\n  /**\n   * Called when something went wrong with the connectio\n   * @callback ResponseHandler~Observer~OnErrorApplyTransformation\n   * @param {any} error The error\n   * @returns {any} The new error\n   */\n\n  /**\n   * Called when something went wrong with the connectio\n   * @callback ResponseHandler~Observer~OnError\n   * @param {any} error The error\n   */\n\n  /**\n   * Called when something went wrong with the connectio\n   * @callback ResponseHandler~MetadataTransformer\n   * @param {any} metadata The metadata got onSuccess\n   * @returns {any} The transformed metadata\n   */\n\n  /**\n   * @typedef {Object} ResponseHandler~Observer\n   * @property {ResponseHandler~Observer~OnError} onError Invoke when a connection error occurs\n   * @property {ResponseHandler~Observer~OnError} onFailure Invoke when a protocol failure occurs\n   * @property {ResponseHandler~Observer~OnErrorApplyTransformation} onErrorApplyTransformation Invoke just after the failure occurs,\n   *  before notify to respective observer. This method should transform the failure reason to the approprited one.\n   */\n\n  /**\n   * Constructor\n   * @param {Object} param The params\n   * @param {ResponseHandler~MetadataTransformer} transformMetadata Transform metadata when the SUCCESS is received.\n   * @param {Channel} channel The channel used to exchange messages\n   * @param {Logger} log The logger\n   * @param {ResponseHandler~Observer} observer Object which will be notified about errors\n   */\n  function ResponseHandler(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        transformMetadata = _b.transformMetadata,\n        log = _b.log,\n        observer = _b.observer;\n\n    this._pendingObservers = [];\n    this._log = log;\n    this._transformMetadata = transformMetadata || NO_OP_IDENTITY;\n    this._observer = Object.assign({\n      onObserversCountChange: NO_OP,\n      onError: NO_OP,\n      onFailure: NO_OP,\n      onErrorApplyTransformation: NO_OP_IDENTITY\n    }, observer);\n  }\n\n  Object.defineProperty(ResponseHandler.prototype, \"currentFailure\", {\n    get: function () {\n      return this._currentFailure;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ResponseHandler.prototype.handleResponse = function (msg) {\n    var payload = msg.fields[0];\n\n    switch (msg.signature) {\n      case RECORD:\n        if (this._log.isDebugEnabled()) {\n          this._log.debug(\"S: RECORD \".concat(neo4j_driver_core_1.json.stringify(msg)));\n        }\n\n        this._currentObserver.onNext(payload);\n\n        break;\n\n      case SUCCESS:\n        if (this._log.isDebugEnabled()) {\n          this._log.debug(\"S: SUCCESS \".concat(neo4j_driver_core_1.json.stringify(msg)));\n        }\n\n        try {\n          var metadata = this._transformMetadata(payload);\n\n          this._currentObserver.onCompleted(metadata);\n        } finally {\n          this._updateCurrentObserver();\n        }\n\n        break;\n\n      case FAILURE:\n        if (this._log.isDebugEnabled()) {\n          this._log.debug(\"S: FAILURE \".concat(neo4j_driver_core_1.json.stringify(msg)));\n        }\n\n        try {\n          var standardizedCode = _standardizeCode(payload.code);\n\n          var error = (0, neo4j_driver_core_1.newError)(payload.message, standardizedCode);\n          this._currentFailure = this._observer.onErrorApplyTransformation(error);\n\n          this._currentObserver.onError(this._currentFailure);\n        } finally {\n          this._updateCurrentObserver(); // Things are now broken. Pending observers will get FAILURE messages routed until we are done handling this failure.\n\n\n          this._observer.onFailure(this._currentFailure);\n        }\n\n        break;\n\n      case IGNORED:\n        if (this._log.isDebugEnabled()) {\n          this._log.debug(\"S: IGNORED \".concat(neo4j_driver_core_1.json.stringify(msg)));\n        }\n\n        try {\n          if (this._currentFailure && this._currentObserver.onError) {\n            this._currentObserver.onError(this._currentFailure);\n          } else if (this._currentObserver.onError) {\n            this._currentObserver.onError((0, neo4j_driver_core_1.newError)('Ignored either because of an error or RESET'));\n          }\n        } finally {\n          this._updateCurrentObserver();\n        }\n\n        break;\n\n      default:\n        this._observer.onError((0, neo4j_driver_core_1.newError)('Unknown Bolt protocol message: ' + msg));\n\n    }\n  };\n  /*\n   * Pop next pending observer form the list of observers and make it current observer.\n   * @protected\n   */\n\n\n  ResponseHandler.prototype._updateCurrentObserver = function () {\n    this._currentObserver = this._pendingObservers.shift();\n\n    this._observer.onObserversCountChange(this._observersCount);\n  };\n\n  Object.defineProperty(ResponseHandler.prototype, \"_observersCount\", {\n    get: function () {\n      return this._currentObserver == null ? this._pendingObservers.length : this._pendingObservers.length + 1;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ResponseHandler.prototype._queueObserver = function (observer) {\n    observer = observer || NO_OP_OBSERVER;\n    observer.onCompleted = observer.onCompleted || NO_OP;\n    observer.onError = observer.onError || NO_OP;\n    observer.onNext = observer.onNext || NO_OP;\n\n    if (this._currentObserver === undefined) {\n      this._currentObserver = observer;\n    } else {\n      this._pendingObservers.push(observer);\n    }\n\n    this._observer.onObserversCountChange(this._observersCount);\n\n    return true;\n  };\n\n  ResponseHandler.prototype._notifyErrorToObservers = function (error) {\n    if (this._currentObserver && this._currentObserver.onError) {\n      this._currentObserver.onError(error);\n    }\n\n    while (this._pendingObservers.length > 0) {\n      var observer = this._pendingObservers.shift();\n\n      if (observer && observer.onError) {\n        observer.onError(error);\n      }\n    }\n  };\n\n  ResponseHandler.prototype.hasOngoingObservableRequests = function () {\n    return this._currentObserver != null || this._pendingObservers.length > 0;\n  };\n\n  ResponseHandler.prototype._resetFailure = function () {\n    this._currentFailure = null;\n  };\n\n  return ResponseHandler;\n}();\n\nexports.default = ResponseHandler;\n/**\n * Standardize error classification that are different between 5.x and previous versions.\n *\n * The transient error were clean-up for being retrieable and because of this\n * `Terminated` and `LockClientStopped` were reclassified as `ClientError`.\n *\n * @param {string} code\n * @returns {string} the standardized error code\n */\n\nfunction _standardizeCode(code) {\n  if (code === 'Neo.TransientError.Transaction.Terminated') {\n    return 'Neo.ClientError.Transaction.Terminated';\n  } else if (code === 'Neo.TransientError.Transaction.LockClientStopped') {\n    return 'Neo.ClientError.Transaction.LockClientStopped';\n  }\n\n  return code;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","neo4j_driver_core_1","require","SUCCESS","RECORD","IGNORED","FAILURE","NO_OP","NO_OP_IDENTITY","subject","NO_OP_OBSERVER","onNext","onCompleted","onError","ResponseHandler","_a","_b","transformMetadata","log","observer","_pendingObservers","_log","_transformMetadata","_observer","assign","onObserversCountChange","onFailure","onErrorApplyTransformation","prototype","get","_currentFailure","enumerable","configurable","handleResponse","msg","payload","fields","signature","isDebugEnabled","debug","concat","json","stringify","_currentObserver","metadata","_updateCurrentObserver","standardizedCode","_standardizeCode","code","error","newError","message","shift","_observersCount","length","_queueObserver","undefined","push","_notifyErrorToObservers","hasOngoingObservableRequests","_resetFailure","default"],"sources":["C:/projects/levelUp_v1/Level-Up-FN/Level-Up-Fronten-master/node_modules/neo4j-driver-bolt-connection/lib/bolt/response-handler.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\n// Signature bytes for each response message type\nvar SUCCESS = 0x70; // 0111 0000 // SUCCESS <metadata>\nvar RECORD = 0x71; // 0111 0001 // RECORD <value>\nvar IGNORED = 0x7e; // 0111 1110 // IGNORED <metadata>\nvar FAILURE = 0x7f; // 0111 1111 // FAILURE <metadata>\nfunction NO_OP() { }\nfunction NO_OP_IDENTITY(subject) {\n    return subject;\n}\nvar NO_OP_OBSERVER = {\n    onNext: NO_OP,\n    onCompleted: NO_OP,\n    onError: NO_OP\n};\n/**\n * Treat the protocol responses and notify the observers\n */\nvar ResponseHandler = /** @class */ (function () {\n    /**\n     * Called when something went wrong with the connectio\n     * @callback ResponseHandler~Observer~OnErrorApplyTransformation\n     * @param {any} error The error\n     * @returns {any} The new error\n     */\n    /**\n     * Called when something went wrong with the connectio\n     * @callback ResponseHandler~Observer~OnError\n     * @param {any} error The error\n     */\n    /**\n     * Called when something went wrong with the connectio\n     * @callback ResponseHandler~MetadataTransformer\n     * @param {any} metadata The metadata got onSuccess\n     * @returns {any} The transformed metadata\n     */\n    /**\n     * @typedef {Object} ResponseHandler~Observer\n     * @property {ResponseHandler~Observer~OnError} onError Invoke when a connection error occurs\n     * @property {ResponseHandler~Observer~OnError} onFailure Invoke when a protocol failure occurs\n     * @property {ResponseHandler~Observer~OnErrorApplyTransformation} onErrorApplyTransformation Invoke just after the failure occurs,\n     *  before notify to respective observer. This method should transform the failure reason to the approprited one.\n     */\n    /**\n     * Constructor\n     * @param {Object} param The params\n     * @param {ResponseHandler~MetadataTransformer} transformMetadata Transform metadata when the SUCCESS is received.\n     * @param {Channel} channel The channel used to exchange messages\n     * @param {Logger} log The logger\n     * @param {ResponseHandler~Observer} observer Object which will be notified about errors\n     */\n    function ResponseHandler(_a) {\n        var _b = _a === void 0 ? {} : _a, transformMetadata = _b.transformMetadata, log = _b.log, observer = _b.observer;\n        this._pendingObservers = [];\n        this._log = log;\n        this._transformMetadata = transformMetadata || NO_OP_IDENTITY;\n        this._observer = Object.assign({\n            onObserversCountChange: NO_OP,\n            onError: NO_OP,\n            onFailure: NO_OP,\n            onErrorApplyTransformation: NO_OP_IDENTITY\n        }, observer);\n    }\n    Object.defineProperty(ResponseHandler.prototype, \"currentFailure\", {\n        get: function () {\n            return this._currentFailure;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ResponseHandler.prototype.handleResponse = function (msg) {\n        var payload = msg.fields[0];\n        switch (msg.signature) {\n            case RECORD:\n                if (this._log.isDebugEnabled()) {\n                    this._log.debug(\"S: RECORD \".concat(neo4j_driver_core_1.json.stringify(msg)));\n                }\n                this._currentObserver.onNext(payload);\n                break;\n            case SUCCESS:\n                if (this._log.isDebugEnabled()) {\n                    this._log.debug(\"S: SUCCESS \".concat(neo4j_driver_core_1.json.stringify(msg)));\n                }\n                try {\n                    var metadata = this._transformMetadata(payload);\n                    this._currentObserver.onCompleted(metadata);\n                }\n                finally {\n                    this._updateCurrentObserver();\n                }\n                break;\n            case FAILURE:\n                if (this._log.isDebugEnabled()) {\n                    this._log.debug(\"S: FAILURE \".concat(neo4j_driver_core_1.json.stringify(msg)));\n                }\n                try {\n                    var standardizedCode = _standardizeCode(payload.code);\n                    var error = (0, neo4j_driver_core_1.newError)(payload.message, standardizedCode);\n                    this._currentFailure = this._observer.onErrorApplyTransformation(error);\n                    this._currentObserver.onError(this._currentFailure);\n                }\n                finally {\n                    this._updateCurrentObserver();\n                    // Things are now broken. Pending observers will get FAILURE messages routed until we are done handling this failure.\n                    this._observer.onFailure(this._currentFailure);\n                }\n                break;\n            case IGNORED:\n                if (this._log.isDebugEnabled()) {\n                    this._log.debug(\"S: IGNORED \".concat(neo4j_driver_core_1.json.stringify(msg)));\n                }\n                try {\n                    if (this._currentFailure && this._currentObserver.onError) {\n                        this._currentObserver.onError(this._currentFailure);\n                    }\n                    else if (this._currentObserver.onError) {\n                        this._currentObserver.onError((0, neo4j_driver_core_1.newError)('Ignored either because of an error or RESET'));\n                    }\n                }\n                finally {\n                    this._updateCurrentObserver();\n                }\n                break;\n            default:\n                this._observer.onError((0, neo4j_driver_core_1.newError)('Unknown Bolt protocol message: ' + msg));\n        }\n    };\n    /*\n     * Pop next pending observer form the list of observers and make it current observer.\n     * @protected\n     */\n    ResponseHandler.prototype._updateCurrentObserver = function () {\n        this._currentObserver = this._pendingObservers.shift();\n        this._observer.onObserversCountChange(this._observersCount);\n    };\n    Object.defineProperty(ResponseHandler.prototype, \"_observersCount\", {\n        get: function () {\n            return this._currentObserver == null ? this._pendingObservers.length : this._pendingObservers.length + 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ResponseHandler.prototype._queueObserver = function (observer) {\n        observer = observer || NO_OP_OBSERVER;\n        observer.onCompleted = observer.onCompleted || NO_OP;\n        observer.onError = observer.onError || NO_OP;\n        observer.onNext = observer.onNext || NO_OP;\n        if (this._currentObserver === undefined) {\n            this._currentObserver = observer;\n        }\n        else {\n            this._pendingObservers.push(observer);\n        }\n        this._observer.onObserversCountChange(this._observersCount);\n        return true;\n    };\n    ResponseHandler.prototype._notifyErrorToObservers = function (error) {\n        if (this._currentObserver && this._currentObserver.onError) {\n            this._currentObserver.onError(error);\n        }\n        while (this._pendingObservers.length > 0) {\n            var observer = this._pendingObservers.shift();\n            if (observer && observer.onError) {\n                observer.onError(error);\n            }\n        }\n    };\n    ResponseHandler.prototype.hasOngoingObservableRequests = function () {\n        return this._currentObserver != null || this._pendingObservers.length > 0;\n    };\n    ResponseHandler.prototype._resetFailure = function () {\n        this._currentFailure = null;\n    };\n    return ResponseHandler;\n}());\nexports.default = ResponseHandler;\n/**\n * Standardize error classification that are different between 5.x and previous versions.\n *\n * The transient error were clean-up for being retrieable and because of this\n * `Terminated` and `LockClientStopped` were reclassified as `ClientError`.\n *\n * @param {string} code\n * @returns {string} the standardized error code\n */\nfunction _standardizeCode(code) {\n    if (code === 'Neo.TransientError.Transaction.Terminated') {\n        return 'Neo.ClientError.Transaction.Terminated';\n    }\n    else if (code === 'Neo.TransientError.Transaction.LockClientStopped') {\n        return 'Neo.ClientError.Transaction.LockClientStopped';\n    }\n    return code;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}