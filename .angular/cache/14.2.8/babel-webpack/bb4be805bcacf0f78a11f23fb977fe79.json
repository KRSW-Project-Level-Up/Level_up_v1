{"ast":null,"code":"\"use strict\";\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\n\nvar SERVICE_UNAVAILABLE = neo4j_driver_core_1.error.SERVICE_UNAVAILABLE,\n    SESSION_EXPIRED = neo4j_driver_core_1.error.SESSION_EXPIRED;\n\nvar ConnectionErrorHandler =\n/** @class */\nfunction () {\n  function ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleSecurityError) {\n    this._errorCode = errorCode;\n    this._handleUnavailability = handleUnavailability || noOpHandler;\n    this._handleWriteFailure = handleWriteFailure || noOpHandler;\n    this._handleSecurityError = handleSecurityError || noOpHandler;\n  }\n\n  ConnectionErrorHandler.create = function (_a) {\n    var errorCode = _a.errorCode,\n        handleUnavailability = _a.handleUnavailability,\n        handleWriteFailure = _a.handleWriteFailure,\n        handleSecurityError = _a.handleSecurityError;\n    return new ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleSecurityError);\n  };\n  /**\n   * Error code to use for network errors.\n   * @return {string} the error code.\n   */\n\n\n  ConnectionErrorHandler.prototype.errorCode = function () {\n    return this._errorCode;\n  };\n  /**\n   * Handle and transform the error.\n   * @param {Neo4jError} error the original error.\n   * @param {ServerAddress} address the address of the connection where the error happened.\n   * @return {Neo4jError} new error that should be propagated to the user.\n   */\n\n\n  ConnectionErrorHandler.prototype.handleAndTransformError = function (error, address, connection) {\n    if (isSecurityError(error)) {\n      return this._handleSecurityError(error, address, connection);\n    }\n\n    if (isAvailabilityError(error)) {\n      return this._handleUnavailability(error, address, connection);\n    }\n\n    if (isFailureToWrite(error)) {\n      return this._handleWriteFailure(error, address, connection);\n    }\n\n    return error;\n  };\n\n  return ConnectionErrorHandler;\n}();\n\nexports.default = ConnectionErrorHandler;\n\nfunction isSecurityError(error) {\n  return error != null && error.code != null && error.code.startsWith('Neo.ClientError.Security.');\n}\n\nfunction isAvailabilityError(error) {\n  if (error) {\n    return error.code === SESSION_EXPIRED || error.code === SERVICE_UNAVAILABLE || error.code === 'Neo.TransientError.General.DatabaseUnavailable';\n  }\n\n  return false;\n}\n\nfunction isFailureToWrite(error) {\n  if (error) {\n    return error.code === 'Neo.ClientError.Cluster.NotALeader' || error.code === 'Neo.ClientError.General.ForbiddenOnReadOnlyDatabase';\n  }\n\n  return false;\n}\n\nfunction noOpHandler(error) {\n  return error;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","neo4j_driver_core_1","require","SERVICE_UNAVAILABLE","error","SESSION_EXPIRED","ConnectionErrorHandler","errorCode","handleUnavailability","handleWriteFailure","handleSecurityError","_errorCode","_handleUnavailability","noOpHandler","_handleWriteFailure","_handleSecurityError","create","_a","prototype","handleAndTransformError","address","connection","isSecurityError","isAvailabilityError","isFailureToWrite","default","code","startsWith"],"sources":["C:/projects/levelUp_v1/Level-Up-FN/Level-Up-Fronten-master/node_modules/neo4j-driver-bolt-connection/lib/connection/connection-error-handler.js"],"sourcesContent":["\"use strict\";\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\nvar SERVICE_UNAVAILABLE = neo4j_driver_core_1.error.SERVICE_UNAVAILABLE, SESSION_EXPIRED = neo4j_driver_core_1.error.SESSION_EXPIRED;\nvar ConnectionErrorHandler = /** @class */ (function () {\n    function ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleSecurityError) {\n        this._errorCode = errorCode;\n        this._handleUnavailability = handleUnavailability || noOpHandler;\n        this._handleWriteFailure = handleWriteFailure || noOpHandler;\n        this._handleSecurityError = handleSecurityError || noOpHandler;\n    }\n    ConnectionErrorHandler.create = function (_a) {\n        var errorCode = _a.errorCode, handleUnavailability = _a.handleUnavailability, handleWriteFailure = _a.handleWriteFailure, handleSecurityError = _a.handleSecurityError;\n        return new ConnectionErrorHandler(errorCode, handleUnavailability, handleWriteFailure, handleSecurityError);\n    };\n    /**\n     * Error code to use for network errors.\n     * @return {string} the error code.\n     */\n    ConnectionErrorHandler.prototype.errorCode = function () {\n        return this._errorCode;\n    };\n    /**\n     * Handle and transform the error.\n     * @param {Neo4jError} error the original error.\n     * @param {ServerAddress} address the address of the connection where the error happened.\n     * @return {Neo4jError} new error that should be propagated to the user.\n     */\n    ConnectionErrorHandler.prototype.handleAndTransformError = function (error, address, connection) {\n        if (isSecurityError(error)) {\n            return this._handleSecurityError(error, address, connection);\n        }\n        if (isAvailabilityError(error)) {\n            return this._handleUnavailability(error, address, connection);\n        }\n        if (isFailureToWrite(error)) {\n            return this._handleWriteFailure(error, address, connection);\n        }\n        return error;\n    };\n    return ConnectionErrorHandler;\n}());\nexports.default = ConnectionErrorHandler;\nfunction isSecurityError(error) {\n    return error != null &&\n        error.code != null &&\n        error.code.startsWith('Neo.ClientError.Security.');\n}\nfunction isAvailabilityError(error) {\n    if (error) {\n        return (error.code === SESSION_EXPIRED ||\n            error.code === SERVICE_UNAVAILABLE ||\n            error.code === 'Neo.TransientError.General.DatabaseUnavailable');\n    }\n    return false;\n}\nfunction isFailureToWrite(error) {\n    if (error) {\n        return (error.code === 'Neo.ClientError.Cluster.NotALeader' ||\n            error.code === 'Neo.ClientError.General.ForbiddenOnReadOnlyDatabase');\n    }\n    return false;\n}\nfunction noOpHandler(error) {\n    return error;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}