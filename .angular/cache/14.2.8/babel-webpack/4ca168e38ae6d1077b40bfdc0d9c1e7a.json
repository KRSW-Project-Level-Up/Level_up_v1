{"ast":null,"code":"\"use strict\";\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.staticAuthTokenManager = exports.authTokenManagers = exports.AuthTokenAndExpiration = void 0;\n\nvar auth_1 = __importDefault(require(\"./auth\"));\n\nvar internal_1 = require(\"./internal\");\n/**\n * Interface for the piece of software responsible for keeping track of current active {@link AuthToken} across the driver.\n * @interface\n * @since 5.14\n */\n\n\nvar AuthTokenManager =\n/** @class */\nfunction () {\n  function AuthTokenManager() {}\n  /**\n   * Returns a valid token.\n   *\n   * **Warning**: This method must only ever return auth information belonging to the same identity.\n   * Switching identities using the `AuthTokenManager` is undefined behavior.\n   *\n   * @returns {Promise<AuthToken>|AuthToken} The valid auth token or a promise for a valid auth token\n   */\n\n\n  AuthTokenManager.prototype.getToken = function () {\n    throw new Error('Not Implemented');\n  };\n  /**\n   * Handles an error notification emitted by the server if a security error happened.\n   *\n   * @param {AuthToken} token The expired token.\n   * @param {`Neo.ClientError.Security.${string}`} securityErrorCode the security error code returned by the server\n   * @return {boolean} whether the exception was handled by the manager, so the driver knows if it can be retried..\n   */\n\n\n  AuthTokenManager.prototype.handleSecurityException = function (token, securityErrorCode) {\n    throw new Error('Not implemented');\n  };\n\n  return AuthTokenManager;\n}();\n\nexports.default = AuthTokenManager;\n/**\n * Interface which defines an {@link AuthToken} with an expiration data time associated\n * @interface\n * @since 5.14\n */\n\nvar AuthTokenAndExpiration =\n/** @class */\nfunction () {\n  function AuthTokenAndExpiration() {\n    /**\n     * The {@link AuthToken} used for authenticate connections.\n     *\n     * @type {AuthToken}\n     * @see {auth}\n     */\n    this.token = auth_1.default.none();\n    /**\n     * The expected expiration date of the auth token.\n     *\n     * This information will be used for triggering the auth token refresh\n     * in managers created with {@link authTokenManagers#bearer}.\n     *\n     * If this value is not defined, the {@link AuthToken} will be considered valid\n     * until a `Neo.ClientError.Security.TokenExpired` error happens.\n     *\n     * @type {Date|undefined}\n     */\n\n    this.expiration = undefined;\n  }\n\n  return AuthTokenAndExpiration;\n}();\n\nexports.AuthTokenAndExpiration = AuthTokenAndExpiration;\n/**\n * Defines the object which holds the common {@link AuthTokenManager} used in the Driver\n */\n\nvar AuthTokenManagers =\n/** @class */\nfunction () {\n  function AuthTokenManagers() {}\n  /**\n   * Creates a {@link AuthTokenManager} for handle {@link AuthToken} which is expires.\n   *\n   * **Warning**: `tokenProvider` must only ever return auth information belonging to the same identity.\n   * Switching identities using the `AuthTokenManager` is undefined behavior.\n   *\n   * @param {object} param0 - The params\n   * @param {function(): Promise<AuthTokenAndExpiration>} param0.tokenProvider - Retrieves a new valid auth token.\n   * Must only ever return auth information belonging to the same identity.\n   * @returns {AuthTokenManager} The temporal auth data manager.\n   */\n\n\n  AuthTokenManagers.prototype.bearer = function (_a) {\n    var tokenProvider = _a.tokenProvider;\n\n    if (typeof tokenProvider !== 'function') {\n      throw new TypeError(\"tokenProvider should be function, but got: \".concat(typeof tokenProvider));\n    }\n\n    return new ExpirationBasedAuthTokenManager(tokenProvider, ['Neo.ClientError.Security.Unauthorized', 'Neo.ClientError.Security.TokenExpired']);\n  };\n  /**\n   * Creates a {@link AuthTokenManager} for handle {@link AuthToken} and password rotation.\n   *\n   * **Warning**: `tokenProvider` must only ever return auth information belonging to the same identity.\n   * Switching identities using the `AuthTokenManager` is undefined behavior.\n   *\n   * @param {object} param0 - The params\n   * @param {function(): Promise<AuthToken>} param0.tokenProvider - Retrieves a new valid auth token.\n   * Must only ever return auth information belonging to the same identity.\n   * @returns {AuthTokenManager} The basic auth data manager.\n   */\n\n\n  AuthTokenManagers.prototype.basic = function (_a) {\n    var _this = this;\n\n    var tokenProvider = _a.tokenProvider;\n\n    if (typeof tokenProvider !== 'function') {\n      throw new TypeError(\"tokenProvider should be function, but got: \".concat(typeof tokenProvider));\n    }\n\n    return new ExpirationBasedAuthTokenManager(function () {\n      return __awaiter(_this, void 0, void 0, function () {\n        var _a;\n\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              _a = {};\n              return [4\n              /*yield*/\n              , tokenProvider()];\n\n            case 1:\n              return [2\n              /*return*/\n              , (_a.token = _b.sent(), _a)];\n          }\n        });\n      });\n    }, ['Neo.ClientError.Security.Unauthorized']);\n  };\n\n  return AuthTokenManagers;\n}();\n/**\n * Holds the common {@link AuthTokenManagers} used in the Driver.\n */\n\n\nvar authTokenManagers = new AuthTokenManagers();\nexports.authTokenManagers = authTokenManagers;\nObject.freeze(authTokenManagers);\n/**\n * Create a {@link AuthTokenManager} for handle static {@link AuthToken}\n *\n * @private\n * @param {param} args - The args\n * @param {AuthToken} args.authToken - The static auth token which will always used in the driver.\n * @returns {AuthTokenManager} The temporal auth data manager.\n */\n\nfunction staticAuthTokenManager(_a) {\n  var authToken = _a.authToken;\n  return new StaticAuthTokenManager(authToken);\n}\n\nexports.staticAuthTokenManager = staticAuthTokenManager;\n\nvar TokenRefreshObservable =\n/** @class */\nfunction () {\n  function TokenRefreshObservable(_subscribers) {\n    if (_subscribers === void 0) {\n      _subscribers = [];\n    }\n\n    this._subscribers = _subscribers;\n  }\n\n  TokenRefreshObservable.prototype.subscribe = function (sub) {\n    this._subscribers.push(sub);\n  };\n\n  TokenRefreshObservable.prototype.onCompleted = function (data) {\n    this._subscribers.forEach(function (sub) {\n      return sub.onCompleted(data);\n    });\n  };\n\n  TokenRefreshObservable.prototype.onError = function (error) {\n    this._subscribers.forEach(function (sub) {\n      return sub.onError(error);\n    });\n  };\n\n  return TokenRefreshObservable;\n}();\n\nvar ExpirationBasedAuthTokenManager =\n/** @class */\nfunction () {\n  function ExpirationBasedAuthTokenManager(_tokenProvider, _handledSecurityCodes, _currentAuthData, _refreshObservable) {\n    this._tokenProvider = _tokenProvider;\n    this._handledSecurityCodes = _handledSecurityCodes;\n    this._currentAuthData = _currentAuthData;\n    this._refreshObservable = _refreshObservable;\n  }\n\n  ExpirationBasedAuthTokenManager.prototype.getToken = function () {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!(this._currentAuthData === undefined || this._currentAuthData.expiration !== undefined && this._currentAuthData.expiration < new Date())) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , this._refreshAuthToken()];\n\n          case 1:\n            _b.sent();\n\n            _b.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            , (_a = this._currentAuthData) === null || _a === void 0 ? void 0 : _a.token];\n        }\n      });\n    });\n  };\n\n  ExpirationBasedAuthTokenManager.prototype.handleSecurityException = function (token, securityErrorCode) {\n    var _a;\n\n    if (this._handledSecurityCodes.includes(securityErrorCode)) {\n      if (internal_1.util.equals(token, (_a = this._currentAuthData) === null || _a === void 0 ? void 0 : _a.token)) {\n        this._scheduleRefreshAuthToken();\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  ExpirationBasedAuthTokenManager.prototype._scheduleRefreshAuthToken = function (observer) {\n    var _this = this;\n\n    if (this._refreshObservable === undefined) {\n      this._currentAuthData = undefined;\n      this._refreshObservable = new TokenRefreshObservable();\n      Promise.resolve(this._tokenProvider()).then(function (data) {\n        var _a;\n\n        _this._currentAuthData = data;\n        (_a = _this._refreshObservable) === null || _a === void 0 ? void 0 : _a.onCompleted(data);\n      }).catch(function (error) {\n        var _a;\n\n        (_a = _this._refreshObservable) === null || _a === void 0 ? void 0 : _a.onError(error);\n      }).finally(function () {\n        _this._refreshObservable = undefined;\n      });\n    }\n\n    if (observer !== undefined) {\n      this._refreshObservable.subscribe(observer);\n    }\n  };\n\n  ExpirationBasedAuthTokenManager.prototype._refreshAuthToken = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , new Promise(function (resolve, reject) {\n              _this._scheduleRefreshAuthToken({\n                onCompleted: resolve,\n                onError: reject\n              });\n            })];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.sent()];\n        }\n      });\n    });\n  };\n\n  return ExpirationBasedAuthTokenManager;\n}();\n\nvar StaticAuthTokenManager =\n/** @class */\nfunction () {\n  function StaticAuthTokenManager(_authToken) {\n    this._authToken = _authToken;\n  }\n\n  StaticAuthTokenManager.prototype.getToken = function () {\n    return this._authToken;\n  };\n\n  StaticAuthTokenManager.prototype.handleSecurityException = function (_, __) {\n    return false;\n  };\n\n  return StaticAuthTokenManager;\n}();","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__importDefault","mod","__esModule","Object","defineProperty","exports","staticAuthTokenManager","authTokenManagers","AuthTokenAndExpiration","auth_1","require","internal_1","AuthTokenManager","prototype","getToken","Error","handleSecurityException","token","securityErrorCode","default","none","expiration","undefined","AuthTokenManagers","bearer","_a","tokenProvider","concat","ExpirationBasedAuthTokenManager","basic","_this","_b","freeze","authToken","StaticAuthTokenManager","TokenRefreshObservable","_subscribers","subscribe","sub","onCompleted","data","forEach","onError","error","_tokenProvider","_handledSecurityCodes","_currentAuthData","_refreshObservable","Date","_refreshAuthToken","includes","util","equals","_scheduleRefreshAuthToken","observer","catch","finally","_authToken","__"],"sources":["C:/projects/levelUp_v1/Level-Up-FN/Level-Up-Fronten-master/node_modules/neo4j-driver-core/lib/auth-token-manager.js"],"sourcesContent":["\"use strict\";\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.staticAuthTokenManager = exports.authTokenManagers = exports.AuthTokenAndExpiration = void 0;\nvar auth_1 = __importDefault(require(\"./auth\"));\nvar internal_1 = require(\"./internal\");\n/**\n * Interface for the piece of software responsible for keeping track of current active {@link AuthToken} across the driver.\n * @interface\n * @since 5.14\n */\nvar AuthTokenManager = /** @class */ (function () {\n    function AuthTokenManager() {\n    }\n    /**\n     * Returns a valid token.\n     *\n     * **Warning**: This method must only ever return auth information belonging to the same identity.\n     * Switching identities using the `AuthTokenManager` is undefined behavior.\n     *\n     * @returns {Promise<AuthToken>|AuthToken} The valid auth token or a promise for a valid auth token\n     */\n    AuthTokenManager.prototype.getToken = function () {\n        throw new Error('Not Implemented');\n    };\n    /**\n     * Handles an error notification emitted by the server if a security error happened.\n     *\n     * @param {AuthToken} token The expired token.\n     * @param {`Neo.ClientError.Security.${string}`} securityErrorCode the security error code returned by the server\n     * @return {boolean} whether the exception was handled by the manager, so the driver knows if it can be retried..\n     */\n    AuthTokenManager.prototype.handleSecurityException = function (token, securityErrorCode) {\n        throw new Error('Not implemented');\n    };\n    return AuthTokenManager;\n}());\nexports.default = AuthTokenManager;\n/**\n * Interface which defines an {@link AuthToken} with an expiration data time associated\n * @interface\n * @since 5.14\n */\nvar AuthTokenAndExpiration = /** @class */ (function () {\n    function AuthTokenAndExpiration() {\n        /**\n         * The {@link AuthToken} used for authenticate connections.\n         *\n         * @type {AuthToken}\n         * @see {auth}\n         */\n        this.token = auth_1.default.none();\n        /**\n         * The expected expiration date of the auth token.\n         *\n         * This information will be used for triggering the auth token refresh\n         * in managers created with {@link authTokenManagers#bearer}.\n         *\n         * If this value is not defined, the {@link AuthToken} will be considered valid\n         * until a `Neo.ClientError.Security.TokenExpired` error happens.\n         *\n         * @type {Date|undefined}\n         */\n        this.expiration = undefined;\n    }\n    return AuthTokenAndExpiration;\n}());\nexports.AuthTokenAndExpiration = AuthTokenAndExpiration;\n/**\n * Defines the object which holds the common {@link AuthTokenManager} used in the Driver\n */\nvar AuthTokenManagers = /** @class */ (function () {\n    function AuthTokenManagers() {\n    }\n    /**\n     * Creates a {@link AuthTokenManager} for handle {@link AuthToken} which is expires.\n     *\n     * **Warning**: `tokenProvider` must only ever return auth information belonging to the same identity.\n     * Switching identities using the `AuthTokenManager` is undefined behavior.\n     *\n     * @param {object} param0 - The params\n     * @param {function(): Promise<AuthTokenAndExpiration>} param0.tokenProvider - Retrieves a new valid auth token.\n     * Must only ever return auth information belonging to the same identity.\n     * @returns {AuthTokenManager} The temporal auth data manager.\n     */\n    AuthTokenManagers.prototype.bearer = function (_a) {\n        var tokenProvider = _a.tokenProvider;\n        if (typeof tokenProvider !== 'function') {\n            throw new TypeError(\"tokenProvider should be function, but got: \".concat(typeof tokenProvider));\n        }\n        return new ExpirationBasedAuthTokenManager(tokenProvider, [\n            'Neo.ClientError.Security.Unauthorized',\n            'Neo.ClientError.Security.TokenExpired'\n        ]);\n    };\n    /**\n     * Creates a {@link AuthTokenManager} for handle {@link AuthToken} and password rotation.\n     *\n     * **Warning**: `tokenProvider` must only ever return auth information belonging to the same identity.\n     * Switching identities using the `AuthTokenManager` is undefined behavior.\n     *\n     * @param {object} param0 - The params\n     * @param {function(): Promise<AuthToken>} param0.tokenProvider - Retrieves a new valid auth token.\n     * Must only ever return auth information belonging to the same identity.\n     * @returns {AuthTokenManager} The basic auth data manager.\n     */\n    AuthTokenManagers.prototype.basic = function (_a) {\n        var _this = this;\n        var tokenProvider = _a.tokenProvider;\n        if (typeof tokenProvider !== 'function') {\n            throw new TypeError(\"tokenProvider should be function, but got: \".concat(typeof tokenProvider));\n        }\n        return new ExpirationBasedAuthTokenManager(function () { return __awaiter(_this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = {};\n                        return [4 /*yield*/, tokenProvider()];\n                    case 1: return [2 /*return*/, (_a.token = _b.sent(), _a)];\n                }\n            });\n        }); }, ['Neo.ClientError.Security.Unauthorized']);\n    };\n    return AuthTokenManagers;\n}());\n/**\n * Holds the common {@link AuthTokenManagers} used in the Driver.\n */\nvar authTokenManagers = new AuthTokenManagers();\nexports.authTokenManagers = authTokenManagers;\nObject.freeze(authTokenManagers);\n/**\n * Create a {@link AuthTokenManager} for handle static {@link AuthToken}\n *\n * @private\n * @param {param} args - The args\n * @param {AuthToken} args.authToken - The static auth token which will always used in the driver.\n * @returns {AuthTokenManager} The temporal auth data manager.\n */\nfunction staticAuthTokenManager(_a) {\n    var authToken = _a.authToken;\n    return new StaticAuthTokenManager(authToken);\n}\nexports.staticAuthTokenManager = staticAuthTokenManager;\nvar TokenRefreshObservable = /** @class */ (function () {\n    function TokenRefreshObservable(_subscribers) {\n        if (_subscribers === void 0) { _subscribers = []; }\n        this._subscribers = _subscribers;\n    }\n    TokenRefreshObservable.prototype.subscribe = function (sub) {\n        this._subscribers.push(sub);\n    };\n    TokenRefreshObservable.prototype.onCompleted = function (data) {\n        this._subscribers.forEach(function (sub) { return sub.onCompleted(data); });\n    };\n    TokenRefreshObservable.prototype.onError = function (error) {\n        this._subscribers.forEach(function (sub) { return sub.onError(error); });\n    };\n    return TokenRefreshObservable;\n}());\nvar ExpirationBasedAuthTokenManager = /** @class */ (function () {\n    function ExpirationBasedAuthTokenManager(_tokenProvider, _handledSecurityCodes, _currentAuthData, _refreshObservable) {\n        this._tokenProvider = _tokenProvider;\n        this._handledSecurityCodes = _handledSecurityCodes;\n        this._currentAuthData = _currentAuthData;\n        this._refreshObservable = _refreshObservable;\n    }\n    ExpirationBasedAuthTokenManager.prototype.getToken = function () {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this._currentAuthData === undefined ||\n                            (this._currentAuthData.expiration !== undefined &&\n                                this._currentAuthData.expiration < new Date()))) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._refreshAuthToken()];\n                    case 1:\n                        _b.sent();\n                        _b.label = 2;\n                    case 2: return [2 /*return*/, (_a = this._currentAuthData) === null || _a === void 0 ? void 0 : _a.token];\n                }\n            });\n        });\n    };\n    ExpirationBasedAuthTokenManager.prototype.handleSecurityException = function (token, securityErrorCode) {\n        var _a;\n        if (this._handledSecurityCodes.includes(securityErrorCode)) {\n            if (internal_1.util.equals(token, (_a = this._currentAuthData) === null || _a === void 0 ? void 0 : _a.token)) {\n                this._scheduleRefreshAuthToken();\n            }\n            return true;\n        }\n        return false;\n    };\n    ExpirationBasedAuthTokenManager.prototype._scheduleRefreshAuthToken = function (observer) {\n        var _this = this;\n        if (this._refreshObservable === undefined) {\n            this._currentAuthData = undefined;\n            this._refreshObservable = new TokenRefreshObservable();\n            Promise.resolve(this._tokenProvider())\n                .then(function (data) {\n                var _a;\n                _this._currentAuthData = data;\n                (_a = _this._refreshObservable) === null || _a === void 0 ? void 0 : _a.onCompleted(data);\n            })\n                .catch(function (error) {\n                var _a;\n                (_a = _this._refreshObservable) === null || _a === void 0 ? void 0 : _a.onError(error);\n            })\n                .finally(function () {\n                _this._refreshObservable = undefined;\n            });\n        }\n        if (observer !== undefined) {\n            this._refreshObservable.subscribe(observer);\n        }\n    };\n    ExpirationBasedAuthTokenManager.prototype._refreshAuthToken = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, new Promise(function (resolve, reject) {\n                            _this._scheduleRefreshAuthToken({\n                                onCompleted: resolve,\n                                onError: reject\n                            });\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return ExpirationBasedAuthTokenManager;\n}());\nvar StaticAuthTokenManager = /** @class */ (function () {\n    function StaticAuthTokenManager(_authToken) {\n        this._authToken = _authToken;\n    }\n    StaticAuthTokenManager.prototype.getToken = function () {\n        return this._authToken;\n    };\n    StaticAuthTokenManager.prototype.handleSecurityException = function (_, __) {\n        return false;\n    };\n    return StaticAuthTokenManager;\n}());\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}