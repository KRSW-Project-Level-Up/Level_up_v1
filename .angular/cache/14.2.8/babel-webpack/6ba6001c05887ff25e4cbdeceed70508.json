{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Unpacker = exports.Packer = void 0;\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar channel_1 = require(\"../channel\");\n\nvar lang_1 = require(\"../lang\");\n\nvar structure_1 = require(\"./structure\");\n\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\n\nvar PROTOCOL_ERROR = neo4j_driver_core_1.error.PROTOCOL_ERROR;\nvar TINY_STRING = 0x80;\nvar TINY_LIST = 0x90;\nvar TINY_MAP = 0xa0;\nvar TINY_STRUCT = 0xb0;\nvar NULL = 0xc0;\nvar FLOAT_64 = 0xc1;\nvar FALSE = 0xc2;\nvar TRUE = 0xc3;\nvar INT_8 = 0xc8;\nvar INT_16 = 0xc9;\nvar INT_32 = 0xca;\nvar INT_64 = 0xcb;\nvar STRING_8 = 0xd0;\nvar STRING_16 = 0xd1;\nvar STRING_32 = 0xd2;\nvar LIST_8 = 0xd4;\nvar LIST_16 = 0xd5;\nvar LIST_32 = 0xd6;\nvar BYTES_8 = 0xcc;\nvar BYTES_16 = 0xcd;\nvar BYTES_32 = 0xce;\nvar MAP_8 = 0xd8;\nvar MAP_16 = 0xd9;\nvar MAP_32 = 0xda;\nvar STRUCT_8 = 0xdc;\nvar STRUCT_16 = 0xdd;\n/**\n * Class to pack\n * @access private\n */\n\nvar Packer =\n/** @class */\nfunction () {\n  /**\n   * @constructor\n   * @param {Chunker} channel the chunker backed by a network channel.\n   */\n  function Packer(channel) {\n    this._ch = channel;\n    this._byteArraysSupported = true;\n  }\n  /**\n   * Creates a packable function out of the provided value\n   * @param x the value to pack\n   * @returns Function\n   */\n\n\n  Packer.prototype.packable = function (x, dehydrateStruct) {\n    var _this = this;\n\n    if (dehydrateStruct === void 0) {\n      dehydrateStruct = lang_1.functional.identity;\n    }\n\n    try {\n      x = dehydrateStruct(x);\n    } catch (ex) {\n      return function () {\n        throw ex;\n      };\n    }\n\n    if (x === null) {\n      return function () {\n        return _this._ch.writeUInt8(NULL);\n      };\n    } else if (x === true) {\n      return function () {\n        return _this._ch.writeUInt8(TRUE);\n      };\n    } else if (x === false) {\n      return function () {\n        return _this._ch.writeUInt8(FALSE);\n      };\n    } else if (typeof x === 'number') {\n      return function () {\n        return _this.packFloat(x);\n      };\n    } else if (typeof x === 'string') {\n      return function () {\n        return _this.packString(x);\n      };\n    } else if (typeof x === 'bigint') {\n      return function () {\n        return _this.packInteger((0, neo4j_driver_core_1.int)(x));\n      };\n    } else if ((0, neo4j_driver_core_1.isInt)(x)) {\n      return function () {\n        return _this.packInteger(x);\n      };\n    } else if (x instanceof Int8Array) {\n      return function () {\n        return _this.packBytes(x);\n      };\n    } else if (x instanceof Array) {\n      return function () {\n        _this.packListHeader(x.length);\n\n        for (var i = 0; i < x.length; i++) {\n          _this.packable(x[i] === undefined ? null : x[i], dehydrateStruct)();\n        }\n      };\n    } else if (isIterable(x)) {\n      return this.packableIterable(x, dehydrateStruct);\n    } else if (x instanceof structure_1.Structure) {\n      var packableFields_1 = [];\n\n      for (var i = 0; i < x.fields.length; i++) {\n        packableFields_1[i] = this.packable(x.fields[i], dehydrateStruct);\n      }\n\n      return function () {\n        return _this.packStruct(x.signature, packableFields_1);\n      };\n    } else if (typeof x === 'object') {\n      return function () {\n        var keys = Object.keys(x);\n        var count = 0;\n\n        for (var i = 0; i < keys.length; i++) {\n          if (x[keys[i]] !== undefined) {\n            count++;\n          }\n        }\n\n        _this.packMapHeader(count);\n\n        for (var i = 0; i < keys.length; i++) {\n          var key = keys[i];\n\n          if (x[key] !== undefined) {\n            _this.packString(key);\n\n            _this.packable(x[key], dehydrateStruct)();\n          }\n        }\n      };\n    } else {\n      return this._nonPackableValue(\"Unable to pack the given value: \".concat(x));\n    }\n  };\n\n  Packer.prototype.packableIterable = function (iterable, dehydrateStruct) {\n    try {\n      var array = Array.from(iterable);\n      return this.packable(array, dehydrateStruct);\n    } catch (e) {\n      // handle errors from iterable to array conversion\n      throw (0, neo4j_driver_core_1.newError)(\"Cannot pack given iterable, \".concat(e.message, \": \").concat(iterable));\n    }\n  };\n  /**\n   * Packs a struct\n   * @param signature the signature of the struct\n   * @param packableFields the fields of the struct, make sure you call `packable on all fields`\n   */\n\n\n  Packer.prototype.packStruct = function (signature, packableFields) {\n    packableFields = packableFields || [];\n    this.packStructHeader(packableFields.length, signature);\n\n    for (var i = 0; i < packableFields.length; i++) {\n      packableFields[i]();\n    }\n  };\n\n  Packer.prototype.packInteger = function (x) {\n    var high = x.high;\n    var low = x.low;\n\n    if (x.greaterThanOrEqual(-0x10) && x.lessThan(0x80)) {\n      this._ch.writeInt8(low);\n    } else if (x.greaterThanOrEqual(-0x80) && x.lessThan(-0x10)) {\n      this._ch.writeUInt8(INT_8);\n\n      this._ch.writeInt8(low);\n    } else if (x.greaterThanOrEqual(-0x8000) && x.lessThan(0x8000)) {\n      this._ch.writeUInt8(INT_16);\n\n      this._ch.writeInt16(low);\n    } else if (x.greaterThanOrEqual(-0x80000000) && x.lessThan(0x80000000)) {\n      this._ch.writeUInt8(INT_32);\n\n      this._ch.writeInt32(low);\n    } else {\n      this._ch.writeUInt8(INT_64);\n\n      this._ch.writeInt32(high);\n\n      this._ch.writeInt32(low);\n    }\n  };\n\n  Packer.prototype.packFloat = function (x) {\n    this._ch.writeUInt8(FLOAT_64);\n\n    this._ch.writeFloat64(x);\n  };\n\n  Packer.prototype.packString = function (x) {\n    var bytes = channel_1.utf8.encode(x);\n    var size = bytes.length;\n\n    if (size < 0x10) {\n      this._ch.writeUInt8(TINY_STRING | size);\n\n      this._ch.writeBytes(bytes);\n    } else if (size < 0x100) {\n      this._ch.writeUInt8(STRING_8);\n\n      this._ch.writeUInt8(size);\n\n      this._ch.writeBytes(bytes);\n    } else if (size < 0x10000) {\n      this._ch.writeUInt8(STRING_16);\n\n      this._ch.writeUInt8(size / 256 >> 0);\n\n      this._ch.writeUInt8(size % 256);\n\n      this._ch.writeBytes(bytes);\n    } else if (size < 0x100000000) {\n      this._ch.writeUInt8(STRING_32);\n\n      this._ch.writeUInt8((size / 16777216 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 65536 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 256 >> 0) % 256);\n\n      this._ch.writeUInt8(size % 256);\n\n      this._ch.writeBytes(bytes);\n    } else {\n      throw (0, neo4j_driver_core_1.newError)('UTF-8 strings of size ' + size + ' are not supported');\n    }\n  };\n\n  Packer.prototype.packListHeader = function (size) {\n    if (size < 0x10) {\n      this._ch.writeUInt8(TINY_LIST | size);\n    } else if (size < 0x100) {\n      this._ch.writeUInt8(LIST_8);\n\n      this._ch.writeUInt8(size);\n    } else if (size < 0x10000) {\n      this._ch.writeUInt8(LIST_16);\n\n      this._ch.writeUInt8((size / 256 >> 0) % 256);\n\n      this._ch.writeUInt8(size % 256);\n    } else if (size < 0x100000000) {\n      this._ch.writeUInt8(LIST_32);\n\n      this._ch.writeUInt8((size / 16777216 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 65536 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 256 >> 0) % 256);\n\n      this._ch.writeUInt8(size % 256);\n    } else {\n      throw (0, neo4j_driver_core_1.newError)('Lists of size ' + size + ' are not supported');\n    }\n  };\n\n  Packer.prototype.packBytes = function (array) {\n    if (this._byteArraysSupported) {\n      this.packBytesHeader(array.length);\n\n      for (var i = 0; i < array.length; i++) {\n        this._ch.writeInt8(array[i]);\n      }\n    } else {\n      throw (0, neo4j_driver_core_1.newError)('Byte arrays are not supported by the database this driver is connected to');\n    }\n  };\n\n  Packer.prototype.packBytesHeader = function (size) {\n    if (size < 0x100) {\n      this._ch.writeUInt8(BYTES_8);\n\n      this._ch.writeUInt8(size);\n    } else if (size < 0x10000) {\n      this._ch.writeUInt8(BYTES_16);\n\n      this._ch.writeUInt8((size / 256 >> 0) % 256);\n\n      this._ch.writeUInt8(size % 256);\n    } else if (size < 0x100000000) {\n      this._ch.writeUInt8(BYTES_32);\n\n      this._ch.writeUInt8((size / 16777216 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 65536 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 256 >> 0) % 256);\n\n      this._ch.writeUInt8(size % 256);\n    } else {\n      throw (0, neo4j_driver_core_1.newError)('Byte arrays of size ' + size + ' are not supported');\n    }\n  };\n\n  Packer.prototype.packMapHeader = function (size) {\n    if (size < 0x10) {\n      this._ch.writeUInt8(TINY_MAP | size);\n    } else if (size < 0x100) {\n      this._ch.writeUInt8(MAP_8);\n\n      this._ch.writeUInt8(size);\n    } else if (size < 0x10000) {\n      this._ch.writeUInt8(MAP_16);\n\n      this._ch.writeUInt8(size / 256 >> 0);\n\n      this._ch.writeUInt8(size % 256);\n    } else if (size < 0x100000000) {\n      this._ch.writeUInt8(MAP_32);\n\n      this._ch.writeUInt8((size / 16777216 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 65536 >> 0) % 256);\n\n      this._ch.writeUInt8((size / 256 >> 0) % 256);\n\n      this._ch.writeUInt8(size % 256);\n    } else {\n      throw (0, neo4j_driver_core_1.newError)('Maps of size ' + size + ' are not supported');\n    }\n  };\n\n  Packer.prototype.packStructHeader = function (size, signature) {\n    if (size < 0x10) {\n      this._ch.writeUInt8(TINY_STRUCT | size);\n\n      this._ch.writeUInt8(signature);\n    } else if (size < 0x100) {\n      this._ch.writeUInt8(STRUCT_8);\n\n      this._ch.writeUInt8(size);\n\n      this._ch.writeUInt8(signature);\n    } else if (size < 0x10000) {\n      this._ch.writeUInt8(STRUCT_16);\n\n      this._ch.writeUInt8(size / 256 >> 0);\n\n      this._ch.writeUInt8(size % 256);\n    } else {\n      throw (0, neo4j_driver_core_1.newError)('Structures of size ' + size + ' are not supported');\n    }\n  };\n\n  Packer.prototype.disableByteArrays = function () {\n    this._byteArraysSupported = false;\n  };\n\n  Packer.prototype._nonPackableValue = function (message) {\n    return function () {\n      throw (0, neo4j_driver_core_1.newError)(message, PROTOCOL_ERROR);\n    };\n  };\n\n  return Packer;\n}();\n\nexports.Packer = Packer;\n/**\n * Class to unpack\n * @access private\n */\n\nvar Unpacker =\n/** @class */\nfunction () {\n  /**\n   * @constructor\n   * @param {boolean} disableLosslessIntegers if this unpacker should convert all received integers to native JS numbers.\n   * @param {boolean} useBigInt if this unpacker should convert all received integers to Bigint\n   */\n  function Unpacker(disableLosslessIntegers, useBigInt) {\n    if (disableLosslessIntegers === void 0) {\n      disableLosslessIntegers = false;\n    }\n\n    if (useBigInt === void 0) {\n      useBigInt = false;\n    }\n\n    this._disableLosslessIntegers = disableLosslessIntegers;\n    this._useBigInt = useBigInt;\n  }\n\n  Unpacker.prototype.unpack = function (buffer, hydrateStructure) {\n    if (hydrateStructure === void 0) {\n      hydrateStructure = lang_1.functional.identity;\n    }\n\n    var marker = buffer.readUInt8();\n    var markerHigh = marker & 0xf0;\n    var markerLow = marker & 0x0f;\n\n    if (marker === NULL) {\n      return null;\n    }\n\n    var boolean = this._unpackBoolean(marker);\n\n    if (boolean !== null) {\n      return boolean;\n    }\n\n    var numberOrInteger = this._unpackNumberOrInteger(marker, buffer);\n\n    if (numberOrInteger !== null) {\n      if ((0, neo4j_driver_core_1.isInt)(numberOrInteger)) {\n        if (this._useBigInt) {\n          return numberOrInteger.toBigInt();\n        } else if (this._disableLosslessIntegers) {\n          return numberOrInteger.toNumberOrInfinity();\n        }\n      }\n\n      return numberOrInteger;\n    }\n\n    var string = this._unpackString(marker, markerHigh, markerLow, buffer);\n\n    if (string !== null) {\n      return string;\n    }\n\n    var list = this._unpackList(marker, markerHigh, markerLow, buffer, hydrateStructure);\n\n    if (list !== null) {\n      return list;\n    }\n\n    var byteArray = this._unpackByteArray(marker, buffer);\n\n    if (byteArray !== null) {\n      return byteArray;\n    }\n\n    var map = this._unpackMap(marker, markerHigh, markerLow, buffer, hydrateStructure);\n\n    if (map !== null) {\n      return map;\n    }\n\n    var struct = this._unpackStruct(marker, markerHigh, markerLow, buffer, hydrateStructure);\n\n    if (struct !== null) {\n      return struct;\n    }\n\n    throw (0, neo4j_driver_core_1.newError)('Unknown packed value with marker ' + marker.toString(16));\n  };\n\n  Unpacker.prototype.unpackInteger = function (buffer) {\n    var marker = buffer.readUInt8();\n\n    var result = this._unpackInteger(marker, buffer);\n\n    if (result == null) {\n      throw (0, neo4j_driver_core_1.newError)('Unable to unpack integer value with marker ' + marker.toString(16));\n    }\n\n    return result;\n  };\n\n  Unpacker.prototype._unpackBoolean = function (marker) {\n    if (marker === TRUE) {\n      return true;\n    } else if (marker === FALSE) {\n      return false;\n    } else {\n      return null;\n    }\n  };\n\n  Unpacker.prototype._unpackNumberOrInteger = function (marker, buffer) {\n    if (marker === FLOAT_64) {\n      return buffer.readFloat64();\n    } else {\n      return this._unpackInteger(marker, buffer);\n    }\n  };\n\n  Unpacker.prototype._unpackInteger = function (marker, buffer) {\n    if (marker >= 0 && marker < 128) {\n      return (0, neo4j_driver_core_1.int)(marker);\n    } else if (marker >= 240 && marker < 256) {\n      return (0, neo4j_driver_core_1.int)(marker - 256);\n    } else if (marker === INT_8) {\n      return (0, neo4j_driver_core_1.int)(buffer.readInt8());\n    } else if (marker === INT_16) {\n      return (0, neo4j_driver_core_1.int)(buffer.readInt16());\n    } else if (marker === INT_32) {\n      var b = buffer.readInt32();\n      return (0, neo4j_driver_core_1.int)(b);\n    } else if (marker === INT_64) {\n      var high = buffer.readInt32();\n      var low = buffer.readInt32();\n      return new neo4j_driver_core_1.Integer(low, high);\n    } else {\n      return null;\n    }\n  };\n\n  Unpacker.prototype._unpackString = function (marker, markerHigh, markerLow, buffer) {\n    if (markerHigh === TINY_STRING) {\n      return channel_1.utf8.decode(buffer, markerLow);\n    } else if (marker === STRING_8) {\n      return channel_1.utf8.decode(buffer, buffer.readUInt8());\n    } else if (marker === STRING_16) {\n      return channel_1.utf8.decode(buffer, buffer.readUInt16());\n    } else if (marker === STRING_32) {\n      return channel_1.utf8.decode(buffer, buffer.readUInt32());\n    } else {\n      return null;\n    }\n  };\n\n  Unpacker.prototype._unpackList = function (marker, markerHigh, markerLow, buffer, hydrateStructure) {\n    if (markerHigh === TINY_LIST) {\n      return this._unpackListWithSize(markerLow, buffer, hydrateStructure);\n    } else if (marker === LIST_8) {\n      return this._unpackListWithSize(buffer.readUInt8(), buffer, hydrateStructure);\n    } else if (marker === LIST_16) {\n      return this._unpackListWithSize(buffer.readUInt16(), buffer, hydrateStructure);\n    } else if (marker === LIST_32) {\n      return this._unpackListWithSize(buffer.readUInt32(), buffer, hydrateStructure);\n    } else {\n      return null;\n    }\n  };\n\n  Unpacker.prototype._unpackListWithSize = function (size, buffer, hydrateStructure) {\n    var value = [];\n\n    for (var i = 0; i < size; i++) {\n      value.push(this.unpack(buffer, hydrateStructure));\n    }\n\n    return value;\n  };\n\n  Unpacker.prototype._unpackByteArray = function (marker, buffer) {\n    if (marker === BYTES_8) {\n      return this._unpackByteArrayWithSize(buffer.readUInt8(), buffer);\n    } else if (marker === BYTES_16) {\n      return this._unpackByteArrayWithSize(buffer.readUInt16(), buffer);\n    } else if (marker === BYTES_32) {\n      return this._unpackByteArrayWithSize(buffer.readUInt32(), buffer);\n    } else {\n      return null;\n    }\n  };\n\n  Unpacker.prototype._unpackByteArrayWithSize = function (size, buffer) {\n    var value = new Int8Array(size);\n\n    for (var i = 0; i < size; i++) {\n      value[i] = buffer.readInt8();\n    }\n\n    return value;\n  };\n\n  Unpacker.prototype._unpackMap = function (marker, markerHigh, markerLow, buffer, hydrateStructure) {\n    if (markerHigh === TINY_MAP) {\n      return this._unpackMapWithSize(markerLow, buffer, hydrateStructure);\n    } else if (marker === MAP_8) {\n      return this._unpackMapWithSize(buffer.readUInt8(), buffer, hydrateStructure);\n    } else if (marker === MAP_16) {\n      return this._unpackMapWithSize(buffer.readUInt16(), buffer, hydrateStructure);\n    } else if (marker === MAP_32) {\n      return this._unpackMapWithSize(buffer.readUInt32(), buffer, hydrateStructure);\n    } else {\n      return null;\n    }\n  };\n\n  Unpacker.prototype._unpackMapWithSize = function (size, buffer, hydrateStructure) {\n    var value = {};\n\n    for (var i = 0; i < size; i++) {\n      var key = this.unpack(buffer, hydrateStructure);\n      value[key] = this.unpack(buffer, hydrateStructure);\n    }\n\n    return value;\n  };\n\n  Unpacker.prototype._unpackStruct = function (marker, markerHigh, markerLow, buffer, hydrateStructure) {\n    if (markerHigh === TINY_STRUCT) {\n      return this._unpackStructWithSize(markerLow, buffer, hydrateStructure);\n    } else if (marker === STRUCT_8) {\n      return this._unpackStructWithSize(buffer.readUInt8(), buffer, hydrateStructure);\n    } else if (marker === STRUCT_16) {\n      return this._unpackStructWithSize(buffer.readUInt16(), buffer, hydrateStructure);\n    } else {\n      return null;\n    }\n  };\n\n  Unpacker.prototype._unpackStructWithSize = function (structSize, buffer, hydrateStructure) {\n    var signature = buffer.readUInt8();\n    var structure = new structure_1.Structure(signature, []);\n\n    for (var i = 0; i < structSize; i++) {\n      structure.fields.push(this.unpack(buffer, hydrateStructure));\n    }\n\n    return hydrateStructure(structure);\n  };\n\n  return Unpacker;\n}();\n\nexports.Unpacker = Unpacker;\n\nfunction isIterable(obj) {\n  if (obj == null) {\n    return false;\n  }\n\n  return typeof obj[Symbol.iterator] === 'function';\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","Unpacker","Packer","channel_1","require","lang_1","structure_1","neo4j_driver_core_1","PROTOCOL_ERROR","error","TINY_STRING","TINY_LIST","TINY_MAP","TINY_STRUCT","NULL","FLOAT_64","FALSE","TRUE","INT_8","INT_16","INT_32","INT_64","STRING_8","STRING_16","STRING_32","LIST_8","LIST_16","LIST_32","BYTES_8","BYTES_16","BYTES_32","MAP_8","MAP_16","MAP_32","STRUCT_8","STRUCT_16","channel","_ch","_byteArraysSupported","prototype","packable","x","dehydrateStruct","_this","functional","identity","ex","writeUInt8","packFloat","packString","packInteger","int","isInt","Int8Array","packBytes","Array","packListHeader","length","i","undefined","isIterable","packableIterable","Structure","packableFields_1","fields","packStruct","signature","keys","count","packMapHeader","key","_nonPackableValue","concat","iterable","array","from","e","newError","message","packableFields","packStructHeader","high","low","greaterThanOrEqual","lessThan","writeInt8","writeInt16","writeInt32","writeFloat64","bytes","utf8","encode","size","writeBytes","packBytesHeader","disableByteArrays","disableLosslessIntegers","useBigInt","_disableLosslessIntegers","_useBigInt","unpack","buffer","hydrateStructure","marker","readUInt8","markerHigh","markerLow","boolean","_unpackBoolean","numberOrInteger","_unpackNumberOrInteger","toBigInt","toNumberOrInfinity","string","_unpackString","list","_unpackList","byteArray","_unpackByteArray","map","_unpackMap","struct","_unpackStruct","toString","unpackInteger","result","_unpackInteger","readFloat64","readInt8","readInt16","b","readInt32","Integer","decode","readUInt16","readUInt32","_unpackListWithSize","push","_unpackByteArrayWithSize","_unpackMapWithSize","_unpackStructWithSize","structSize","structure","obj","Symbol","iterator"],"sources":["C:/projects/levelUp_v1/Level-Up-FN/Level-Up-Fronten-master/node_modules/neo4j-driver-bolt-connection/lib/packstream/packstream-v1.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Unpacker = exports.Packer = void 0;\n/**\n * Copyright (c) \"Neo4j\"\n * Neo4j Sweden AB [https://neo4j.com]\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar channel_1 = require(\"../channel\");\nvar lang_1 = require(\"../lang\");\nvar structure_1 = require(\"./structure\");\nvar neo4j_driver_core_1 = require(\"neo4j-driver-core\");\nvar PROTOCOL_ERROR = neo4j_driver_core_1.error.PROTOCOL_ERROR;\nvar TINY_STRING = 0x80;\nvar TINY_LIST = 0x90;\nvar TINY_MAP = 0xa0;\nvar TINY_STRUCT = 0xb0;\nvar NULL = 0xc0;\nvar FLOAT_64 = 0xc1;\nvar FALSE = 0xc2;\nvar TRUE = 0xc3;\nvar INT_8 = 0xc8;\nvar INT_16 = 0xc9;\nvar INT_32 = 0xca;\nvar INT_64 = 0xcb;\nvar STRING_8 = 0xd0;\nvar STRING_16 = 0xd1;\nvar STRING_32 = 0xd2;\nvar LIST_8 = 0xd4;\nvar LIST_16 = 0xd5;\nvar LIST_32 = 0xd6;\nvar BYTES_8 = 0xcc;\nvar BYTES_16 = 0xcd;\nvar BYTES_32 = 0xce;\nvar MAP_8 = 0xd8;\nvar MAP_16 = 0xd9;\nvar MAP_32 = 0xda;\nvar STRUCT_8 = 0xdc;\nvar STRUCT_16 = 0xdd;\n/**\n * Class to pack\n * @access private\n */\nvar Packer = /** @class */ (function () {\n    /**\n     * @constructor\n     * @param {Chunker} channel the chunker backed by a network channel.\n     */\n    function Packer(channel) {\n        this._ch = channel;\n        this._byteArraysSupported = true;\n    }\n    /**\n     * Creates a packable function out of the provided value\n     * @param x the value to pack\n     * @returns Function\n     */\n    Packer.prototype.packable = function (x, dehydrateStruct) {\n        var _this = this;\n        if (dehydrateStruct === void 0) { dehydrateStruct = lang_1.functional.identity; }\n        try {\n            x = dehydrateStruct(x);\n        }\n        catch (ex) {\n            return function () { throw ex; };\n        }\n        if (x === null) {\n            return function () { return _this._ch.writeUInt8(NULL); };\n        }\n        else if (x === true) {\n            return function () { return _this._ch.writeUInt8(TRUE); };\n        }\n        else if (x === false) {\n            return function () { return _this._ch.writeUInt8(FALSE); };\n        }\n        else if (typeof x === 'number') {\n            return function () { return _this.packFloat(x); };\n        }\n        else if (typeof x === 'string') {\n            return function () { return _this.packString(x); };\n        }\n        else if (typeof x === 'bigint') {\n            return function () { return _this.packInteger((0, neo4j_driver_core_1.int)(x)); };\n        }\n        else if ((0, neo4j_driver_core_1.isInt)(x)) {\n            return function () { return _this.packInteger(x); };\n        }\n        else if (x instanceof Int8Array) {\n            return function () { return _this.packBytes(x); };\n        }\n        else if (x instanceof Array) {\n            return function () {\n                _this.packListHeader(x.length);\n                for (var i = 0; i < x.length; i++) {\n                    _this.packable(x[i] === undefined ? null : x[i], dehydrateStruct)();\n                }\n            };\n        }\n        else if (isIterable(x)) {\n            return this.packableIterable(x, dehydrateStruct);\n        }\n        else if (x instanceof structure_1.Structure) {\n            var packableFields_1 = [];\n            for (var i = 0; i < x.fields.length; i++) {\n                packableFields_1[i] = this.packable(x.fields[i], dehydrateStruct);\n            }\n            return function () { return _this.packStruct(x.signature, packableFields_1); };\n        }\n        else if (typeof x === 'object') {\n            return function () {\n                var keys = Object.keys(x);\n                var count = 0;\n                for (var i = 0; i < keys.length; i++) {\n                    if (x[keys[i]] !== undefined) {\n                        count++;\n                    }\n                }\n                _this.packMapHeader(count);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    if (x[key] !== undefined) {\n                        _this.packString(key);\n                        _this.packable(x[key], dehydrateStruct)();\n                    }\n                }\n            };\n        }\n        else {\n            return this._nonPackableValue(\"Unable to pack the given value: \".concat(x));\n        }\n    };\n    Packer.prototype.packableIterable = function (iterable, dehydrateStruct) {\n        try {\n            var array = Array.from(iterable);\n            return this.packable(array, dehydrateStruct);\n        }\n        catch (e) {\n            // handle errors from iterable to array conversion\n            throw (0, neo4j_driver_core_1.newError)(\"Cannot pack given iterable, \".concat(e.message, \": \").concat(iterable));\n        }\n    };\n    /**\n     * Packs a struct\n     * @param signature the signature of the struct\n     * @param packableFields the fields of the struct, make sure you call `packable on all fields`\n     */\n    Packer.prototype.packStruct = function (signature, packableFields) {\n        packableFields = packableFields || [];\n        this.packStructHeader(packableFields.length, signature);\n        for (var i = 0; i < packableFields.length; i++) {\n            packableFields[i]();\n        }\n    };\n    Packer.prototype.packInteger = function (x) {\n        var high = x.high;\n        var low = x.low;\n        if (x.greaterThanOrEqual(-0x10) && x.lessThan(0x80)) {\n            this._ch.writeInt8(low);\n        }\n        else if (x.greaterThanOrEqual(-0x80) && x.lessThan(-0x10)) {\n            this._ch.writeUInt8(INT_8);\n            this._ch.writeInt8(low);\n        }\n        else if (x.greaterThanOrEqual(-0x8000) && x.lessThan(0x8000)) {\n            this._ch.writeUInt8(INT_16);\n            this._ch.writeInt16(low);\n        }\n        else if (x.greaterThanOrEqual(-0x80000000) && x.lessThan(0x80000000)) {\n            this._ch.writeUInt8(INT_32);\n            this._ch.writeInt32(low);\n        }\n        else {\n            this._ch.writeUInt8(INT_64);\n            this._ch.writeInt32(high);\n            this._ch.writeInt32(low);\n        }\n    };\n    Packer.prototype.packFloat = function (x) {\n        this._ch.writeUInt8(FLOAT_64);\n        this._ch.writeFloat64(x);\n    };\n    Packer.prototype.packString = function (x) {\n        var bytes = channel_1.utf8.encode(x);\n        var size = bytes.length;\n        if (size < 0x10) {\n            this._ch.writeUInt8(TINY_STRING | size);\n            this._ch.writeBytes(bytes);\n        }\n        else if (size < 0x100) {\n            this._ch.writeUInt8(STRING_8);\n            this._ch.writeUInt8(size);\n            this._ch.writeBytes(bytes);\n        }\n        else if (size < 0x10000) {\n            this._ch.writeUInt8(STRING_16);\n            this._ch.writeUInt8((size / 256) >> 0);\n            this._ch.writeUInt8(size % 256);\n            this._ch.writeBytes(bytes);\n        }\n        else if (size < 0x100000000) {\n            this._ch.writeUInt8(STRING_32);\n            this._ch.writeUInt8(((size / 16777216) >> 0) % 256);\n            this._ch.writeUInt8(((size / 65536) >> 0) % 256);\n            this._ch.writeUInt8(((size / 256) >> 0) % 256);\n            this._ch.writeUInt8(size % 256);\n            this._ch.writeBytes(bytes);\n        }\n        else {\n            throw (0, neo4j_driver_core_1.newError)('UTF-8 strings of size ' + size + ' are not supported');\n        }\n    };\n    Packer.prototype.packListHeader = function (size) {\n        if (size < 0x10) {\n            this._ch.writeUInt8(TINY_LIST | size);\n        }\n        else if (size < 0x100) {\n            this._ch.writeUInt8(LIST_8);\n            this._ch.writeUInt8(size);\n        }\n        else if (size < 0x10000) {\n            this._ch.writeUInt8(LIST_16);\n            this._ch.writeUInt8(((size / 256) >> 0) % 256);\n            this._ch.writeUInt8(size % 256);\n        }\n        else if (size < 0x100000000) {\n            this._ch.writeUInt8(LIST_32);\n            this._ch.writeUInt8(((size / 16777216) >> 0) % 256);\n            this._ch.writeUInt8(((size / 65536) >> 0) % 256);\n            this._ch.writeUInt8(((size / 256) >> 0) % 256);\n            this._ch.writeUInt8(size % 256);\n        }\n        else {\n            throw (0, neo4j_driver_core_1.newError)('Lists of size ' + size + ' are not supported');\n        }\n    };\n    Packer.prototype.packBytes = function (array) {\n        if (this._byteArraysSupported) {\n            this.packBytesHeader(array.length);\n            for (var i = 0; i < array.length; i++) {\n                this._ch.writeInt8(array[i]);\n            }\n        }\n        else {\n            throw (0, neo4j_driver_core_1.newError)('Byte arrays are not supported by the database this driver is connected to');\n        }\n    };\n    Packer.prototype.packBytesHeader = function (size) {\n        if (size < 0x100) {\n            this._ch.writeUInt8(BYTES_8);\n            this._ch.writeUInt8(size);\n        }\n        else if (size < 0x10000) {\n            this._ch.writeUInt8(BYTES_16);\n            this._ch.writeUInt8(((size / 256) >> 0) % 256);\n            this._ch.writeUInt8(size % 256);\n        }\n        else if (size < 0x100000000) {\n            this._ch.writeUInt8(BYTES_32);\n            this._ch.writeUInt8(((size / 16777216) >> 0) % 256);\n            this._ch.writeUInt8(((size / 65536) >> 0) % 256);\n            this._ch.writeUInt8(((size / 256) >> 0) % 256);\n            this._ch.writeUInt8(size % 256);\n        }\n        else {\n            throw (0, neo4j_driver_core_1.newError)('Byte arrays of size ' + size + ' are not supported');\n        }\n    };\n    Packer.prototype.packMapHeader = function (size) {\n        if (size < 0x10) {\n            this._ch.writeUInt8(TINY_MAP | size);\n        }\n        else if (size < 0x100) {\n            this._ch.writeUInt8(MAP_8);\n            this._ch.writeUInt8(size);\n        }\n        else if (size < 0x10000) {\n            this._ch.writeUInt8(MAP_16);\n            this._ch.writeUInt8((size / 256) >> 0);\n            this._ch.writeUInt8(size % 256);\n        }\n        else if (size < 0x100000000) {\n            this._ch.writeUInt8(MAP_32);\n            this._ch.writeUInt8(((size / 16777216) >> 0) % 256);\n            this._ch.writeUInt8(((size / 65536) >> 0) % 256);\n            this._ch.writeUInt8(((size / 256) >> 0) % 256);\n            this._ch.writeUInt8(size % 256);\n        }\n        else {\n            throw (0, neo4j_driver_core_1.newError)('Maps of size ' + size + ' are not supported');\n        }\n    };\n    Packer.prototype.packStructHeader = function (size, signature) {\n        if (size < 0x10) {\n            this._ch.writeUInt8(TINY_STRUCT | size);\n            this._ch.writeUInt8(signature);\n        }\n        else if (size < 0x100) {\n            this._ch.writeUInt8(STRUCT_8);\n            this._ch.writeUInt8(size);\n            this._ch.writeUInt8(signature);\n        }\n        else if (size < 0x10000) {\n            this._ch.writeUInt8(STRUCT_16);\n            this._ch.writeUInt8((size / 256) >> 0);\n            this._ch.writeUInt8(size % 256);\n        }\n        else {\n            throw (0, neo4j_driver_core_1.newError)('Structures of size ' + size + ' are not supported');\n        }\n    };\n    Packer.prototype.disableByteArrays = function () {\n        this._byteArraysSupported = false;\n    };\n    Packer.prototype._nonPackableValue = function (message) {\n        return function () {\n            throw (0, neo4j_driver_core_1.newError)(message, PROTOCOL_ERROR);\n        };\n    };\n    return Packer;\n}());\nexports.Packer = Packer;\n/**\n * Class to unpack\n * @access private\n */\nvar Unpacker = /** @class */ (function () {\n    /**\n     * @constructor\n     * @param {boolean} disableLosslessIntegers if this unpacker should convert all received integers to native JS numbers.\n     * @param {boolean} useBigInt if this unpacker should convert all received integers to Bigint\n     */\n    function Unpacker(disableLosslessIntegers, useBigInt) {\n        if (disableLosslessIntegers === void 0) { disableLosslessIntegers = false; }\n        if (useBigInt === void 0) { useBigInt = false; }\n        this._disableLosslessIntegers = disableLosslessIntegers;\n        this._useBigInt = useBigInt;\n    }\n    Unpacker.prototype.unpack = function (buffer, hydrateStructure) {\n        if (hydrateStructure === void 0) { hydrateStructure = lang_1.functional.identity; }\n        var marker = buffer.readUInt8();\n        var markerHigh = marker & 0xf0;\n        var markerLow = marker & 0x0f;\n        if (marker === NULL) {\n            return null;\n        }\n        var boolean = this._unpackBoolean(marker);\n        if (boolean !== null) {\n            return boolean;\n        }\n        var numberOrInteger = this._unpackNumberOrInteger(marker, buffer);\n        if (numberOrInteger !== null) {\n            if ((0, neo4j_driver_core_1.isInt)(numberOrInteger)) {\n                if (this._useBigInt) {\n                    return numberOrInteger.toBigInt();\n                }\n                else if (this._disableLosslessIntegers) {\n                    return numberOrInteger.toNumberOrInfinity();\n                }\n            }\n            return numberOrInteger;\n        }\n        var string = this._unpackString(marker, markerHigh, markerLow, buffer);\n        if (string !== null) {\n            return string;\n        }\n        var list = this._unpackList(marker, markerHigh, markerLow, buffer, hydrateStructure);\n        if (list !== null) {\n            return list;\n        }\n        var byteArray = this._unpackByteArray(marker, buffer);\n        if (byteArray !== null) {\n            return byteArray;\n        }\n        var map = this._unpackMap(marker, markerHigh, markerLow, buffer, hydrateStructure);\n        if (map !== null) {\n            return map;\n        }\n        var struct = this._unpackStruct(marker, markerHigh, markerLow, buffer, hydrateStructure);\n        if (struct !== null) {\n            return struct;\n        }\n        throw (0, neo4j_driver_core_1.newError)('Unknown packed value with marker ' + marker.toString(16));\n    };\n    Unpacker.prototype.unpackInteger = function (buffer) {\n        var marker = buffer.readUInt8();\n        var result = this._unpackInteger(marker, buffer);\n        if (result == null) {\n            throw (0, neo4j_driver_core_1.newError)('Unable to unpack integer value with marker ' + marker.toString(16));\n        }\n        return result;\n    };\n    Unpacker.prototype._unpackBoolean = function (marker) {\n        if (marker === TRUE) {\n            return true;\n        }\n        else if (marker === FALSE) {\n            return false;\n        }\n        else {\n            return null;\n        }\n    };\n    Unpacker.prototype._unpackNumberOrInteger = function (marker, buffer) {\n        if (marker === FLOAT_64) {\n            return buffer.readFloat64();\n        }\n        else {\n            return this._unpackInteger(marker, buffer);\n        }\n    };\n    Unpacker.prototype._unpackInteger = function (marker, buffer) {\n        if (marker >= 0 && marker < 128) {\n            return (0, neo4j_driver_core_1.int)(marker);\n        }\n        else if (marker >= 240 && marker < 256) {\n            return (0, neo4j_driver_core_1.int)(marker - 256);\n        }\n        else if (marker === INT_8) {\n            return (0, neo4j_driver_core_1.int)(buffer.readInt8());\n        }\n        else if (marker === INT_16) {\n            return (0, neo4j_driver_core_1.int)(buffer.readInt16());\n        }\n        else if (marker === INT_32) {\n            var b = buffer.readInt32();\n            return (0, neo4j_driver_core_1.int)(b);\n        }\n        else if (marker === INT_64) {\n            var high = buffer.readInt32();\n            var low = buffer.readInt32();\n            return new neo4j_driver_core_1.Integer(low, high);\n        }\n        else {\n            return null;\n        }\n    };\n    Unpacker.prototype._unpackString = function (marker, markerHigh, markerLow, buffer) {\n        if (markerHigh === TINY_STRING) {\n            return channel_1.utf8.decode(buffer, markerLow);\n        }\n        else if (marker === STRING_8) {\n            return channel_1.utf8.decode(buffer, buffer.readUInt8());\n        }\n        else if (marker === STRING_16) {\n            return channel_1.utf8.decode(buffer, buffer.readUInt16());\n        }\n        else if (marker === STRING_32) {\n            return channel_1.utf8.decode(buffer, buffer.readUInt32());\n        }\n        else {\n            return null;\n        }\n    };\n    Unpacker.prototype._unpackList = function (marker, markerHigh, markerLow, buffer, hydrateStructure) {\n        if (markerHigh === TINY_LIST) {\n            return this._unpackListWithSize(markerLow, buffer, hydrateStructure);\n        }\n        else if (marker === LIST_8) {\n            return this._unpackListWithSize(buffer.readUInt8(), buffer, hydrateStructure);\n        }\n        else if (marker === LIST_16) {\n            return this._unpackListWithSize(buffer.readUInt16(), buffer, hydrateStructure);\n        }\n        else if (marker === LIST_32) {\n            return this._unpackListWithSize(buffer.readUInt32(), buffer, hydrateStructure);\n        }\n        else {\n            return null;\n        }\n    };\n    Unpacker.prototype._unpackListWithSize = function (size, buffer, hydrateStructure) {\n        var value = [];\n        for (var i = 0; i < size; i++) {\n            value.push(this.unpack(buffer, hydrateStructure));\n        }\n        return value;\n    };\n    Unpacker.prototype._unpackByteArray = function (marker, buffer) {\n        if (marker === BYTES_8) {\n            return this._unpackByteArrayWithSize(buffer.readUInt8(), buffer);\n        }\n        else if (marker === BYTES_16) {\n            return this._unpackByteArrayWithSize(buffer.readUInt16(), buffer);\n        }\n        else if (marker === BYTES_32) {\n            return this._unpackByteArrayWithSize(buffer.readUInt32(), buffer);\n        }\n        else {\n            return null;\n        }\n    };\n    Unpacker.prototype._unpackByteArrayWithSize = function (size, buffer) {\n        var value = new Int8Array(size);\n        for (var i = 0; i < size; i++) {\n            value[i] = buffer.readInt8();\n        }\n        return value;\n    };\n    Unpacker.prototype._unpackMap = function (marker, markerHigh, markerLow, buffer, hydrateStructure) {\n        if (markerHigh === TINY_MAP) {\n            return this._unpackMapWithSize(markerLow, buffer, hydrateStructure);\n        }\n        else if (marker === MAP_8) {\n            return this._unpackMapWithSize(buffer.readUInt8(), buffer, hydrateStructure);\n        }\n        else if (marker === MAP_16) {\n            return this._unpackMapWithSize(buffer.readUInt16(), buffer, hydrateStructure);\n        }\n        else if (marker === MAP_32) {\n            return this._unpackMapWithSize(buffer.readUInt32(), buffer, hydrateStructure);\n        }\n        else {\n            return null;\n        }\n    };\n    Unpacker.prototype._unpackMapWithSize = function (size, buffer, hydrateStructure) {\n        var value = {};\n        for (var i = 0; i < size; i++) {\n            var key = this.unpack(buffer, hydrateStructure);\n            value[key] = this.unpack(buffer, hydrateStructure);\n        }\n        return value;\n    };\n    Unpacker.prototype._unpackStruct = function (marker, markerHigh, markerLow, buffer, hydrateStructure) {\n        if (markerHigh === TINY_STRUCT) {\n            return this._unpackStructWithSize(markerLow, buffer, hydrateStructure);\n        }\n        else if (marker === STRUCT_8) {\n            return this._unpackStructWithSize(buffer.readUInt8(), buffer, hydrateStructure);\n        }\n        else if (marker === STRUCT_16) {\n            return this._unpackStructWithSize(buffer.readUInt16(), buffer, hydrateStructure);\n        }\n        else {\n            return null;\n        }\n    };\n    Unpacker.prototype._unpackStructWithSize = function (structSize, buffer, hydrateStructure) {\n        var signature = buffer.readUInt8();\n        var structure = new structure_1.Structure(signature, []);\n        for (var i = 0; i < structSize; i++) {\n            structure.fields.push(this.unpack(buffer, hydrateStructure));\n        }\n        return hydrateStructure(structure);\n    };\n    return Unpacker;\n}());\nexports.Unpacker = Unpacker;\nfunction isIterable(obj) {\n    if (obj == null) {\n        return false;\n    }\n    return typeof obj[Symbol.iterator] === 'function';\n}\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,QAAR,GAAmBF,OAAO,CAACG,MAAR,GAAiB,KAAK,CAAzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,SAAS,GAAGC,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,SAAD,CAApB;;AACA,IAAIE,WAAW,GAAGF,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIG,mBAAmB,GAAGH,OAAO,CAAC,mBAAD,CAAjC;;AACA,IAAII,cAAc,GAAGD,mBAAmB,CAACE,KAApB,CAA0BD,cAA/C;AACA,IAAIE,WAAW,GAAG,IAAlB;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,WAAW,GAAG,IAAlB;AACA,IAAIC,IAAI,GAAG,IAAX;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,KAAK,GAAG,IAAZ;AACA,IAAIC,IAAI,GAAG,IAAX;AACA,IAAIC,KAAK,GAAG,IAAZ;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,KAAK,GAAG,IAAZ;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,MAAM,GAAG,IAAb;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,SAAS,GAAG,IAAhB;AACA;AACA;AACA;AACA;;AACA,IAAIjC,MAAM;AAAG;AAAe,YAAY;EACpC;AACJ;AACA;AACA;EACI,SAASA,MAAT,CAAgBkC,OAAhB,EAAyB;IACrB,KAAKC,GAAL,GAAWD,OAAX;IACA,KAAKE,oBAAL,GAA4B,IAA5B;EACH;EACD;AACJ;AACA;AACA;AACA;;;EACIpC,MAAM,CAACqC,SAAP,CAAiBC,QAAjB,GAA4B,UAAUC,CAAV,EAAaC,eAAb,EAA8B;IACtD,IAAIC,KAAK,GAAG,IAAZ;;IACA,IAAID,eAAe,KAAK,KAAK,CAA7B,EAAgC;MAAEA,eAAe,GAAGrC,MAAM,CAACuC,UAAP,CAAkBC,QAApC;IAA+C;;IACjF,IAAI;MACAJ,CAAC,GAAGC,eAAe,CAACD,CAAD,CAAnB;IACH,CAFD,CAGA,OAAOK,EAAP,EAAW;MACP,OAAO,YAAY;QAAE,MAAMA,EAAN;MAAW,CAAhC;IACH;;IACD,IAAIL,CAAC,KAAK,IAAV,EAAgB;MACZ,OAAO,YAAY;QAAE,OAAOE,KAAK,CAACN,GAAN,CAAUU,UAAV,CAAqBjC,IAArB,CAAP;MAAoC,CAAzD;IACH,CAFD,MAGK,IAAI2B,CAAC,KAAK,IAAV,EAAgB;MACjB,OAAO,YAAY;QAAE,OAAOE,KAAK,CAACN,GAAN,CAAUU,UAAV,CAAqB9B,IAArB,CAAP;MAAoC,CAAzD;IACH,CAFI,MAGA,IAAIwB,CAAC,KAAK,KAAV,EAAiB;MAClB,OAAO,YAAY;QAAE,OAAOE,KAAK,CAACN,GAAN,CAAUU,UAAV,CAAqB/B,KAArB,CAAP;MAAqC,CAA1D;IACH,CAFI,MAGA,IAAI,OAAOyB,CAAP,KAAa,QAAjB,EAA2B;MAC5B,OAAO,YAAY;QAAE,OAAOE,KAAK,CAACK,SAAN,CAAgBP,CAAhB,CAAP;MAA4B,CAAjD;IACH,CAFI,MAGA,IAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B;MAC5B,OAAO,YAAY;QAAE,OAAOE,KAAK,CAACM,UAAN,CAAiBR,CAAjB,CAAP;MAA6B,CAAlD;IACH,CAFI,MAGA,IAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B;MAC5B,OAAO,YAAY;QAAE,OAAOE,KAAK,CAACO,WAAN,CAAkB,CAAC,GAAG3C,mBAAmB,CAAC4C,GAAxB,EAA6BV,CAA7B,CAAlB,CAAP;MAA4D,CAAjF;IACH,CAFI,MAGA,IAAI,CAAC,GAAGlC,mBAAmB,CAAC6C,KAAxB,EAA+BX,CAA/B,CAAJ,EAAuC;MACxC,OAAO,YAAY;QAAE,OAAOE,KAAK,CAACO,WAAN,CAAkBT,CAAlB,CAAP;MAA8B,CAAnD;IACH,CAFI,MAGA,IAAIA,CAAC,YAAYY,SAAjB,EAA4B;MAC7B,OAAO,YAAY;QAAE,OAAOV,KAAK,CAACW,SAAN,CAAgBb,CAAhB,CAAP;MAA4B,CAAjD;IACH,CAFI,MAGA,IAAIA,CAAC,YAAYc,KAAjB,EAAwB;MACzB,OAAO,YAAY;QACfZ,KAAK,CAACa,cAAN,CAAqBf,CAAC,CAACgB,MAAvB;;QACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjB,CAAC,CAACgB,MAAtB,EAA8BC,CAAC,EAA/B,EAAmC;UAC/Bf,KAAK,CAACH,QAAN,CAAeC,CAAC,CAACiB,CAAD,CAAD,KAASC,SAAT,GAAqB,IAArB,GAA4BlB,CAAC,CAACiB,CAAD,CAA5C,EAAiDhB,eAAjD;QACH;MACJ,CALD;IAMH,CAPI,MAQA,IAAIkB,UAAU,CAACnB,CAAD,CAAd,EAAmB;MACpB,OAAO,KAAKoB,gBAAL,CAAsBpB,CAAtB,EAAyBC,eAAzB,CAAP;IACH,CAFI,MAGA,IAAID,CAAC,YAAYnC,WAAW,CAACwD,SAA7B,EAAwC;MACzC,IAAIC,gBAAgB,GAAG,EAAvB;;MACA,KAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjB,CAAC,CAACuB,MAAF,CAASP,MAA7B,EAAqCC,CAAC,EAAtC,EAA0C;QACtCK,gBAAgB,CAACL,CAAD,CAAhB,GAAsB,KAAKlB,QAAL,CAAcC,CAAC,CAACuB,MAAF,CAASN,CAAT,CAAd,EAA2BhB,eAA3B,CAAtB;MACH;;MACD,OAAO,YAAY;QAAE,OAAOC,KAAK,CAACsB,UAAN,CAAiBxB,CAAC,CAACyB,SAAnB,EAA8BH,gBAA9B,CAAP;MAAyD,CAA9E;IACH,CANI,MAOA,IAAI,OAAOtB,CAAP,KAAa,QAAjB,EAA2B;MAC5B,OAAO,YAAY;QACf,IAAI0B,IAAI,GAAGtE,MAAM,CAACsE,IAAP,CAAY1B,CAAZ,CAAX;QACA,IAAI2B,KAAK,GAAG,CAAZ;;QACA,KAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGS,IAAI,CAACV,MAAzB,EAAiCC,CAAC,EAAlC,EAAsC;UAClC,IAAIjB,CAAC,CAAC0B,IAAI,CAACT,CAAD,CAAL,CAAD,KAAeC,SAAnB,EAA8B;YAC1BS,KAAK;UACR;QACJ;;QACDzB,KAAK,CAAC0B,aAAN,CAAoBD,KAApB;;QACA,KAAK,IAAIV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGS,IAAI,CAACV,MAAzB,EAAiCC,CAAC,EAAlC,EAAsC;UAClC,IAAIY,GAAG,GAAGH,IAAI,CAACT,CAAD,CAAd;;UACA,IAAIjB,CAAC,CAAC6B,GAAD,CAAD,KAAWX,SAAf,EAA0B;YACtBhB,KAAK,CAACM,UAAN,CAAiBqB,GAAjB;;YACA3B,KAAK,CAACH,QAAN,CAAeC,CAAC,CAAC6B,GAAD,CAAhB,EAAuB5B,eAAvB;UACH;QACJ;MACJ,CAhBD;IAiBH,CAlBI,MAmBA;MACD,OAAO,KAAK6B,iBAAL,CAAuB,mCAAmCC,MAAnC,CAA0C/B,CAA1C,CAAvB,CAAP;IACH;EACJ,CAzED;;EA0EAvC,MAAM,CAACqC,SAAP,CAAiBsB,gBAAjB,GAAoC,UAAUY,QAAV,EAAoB/B,eAApB,EAAqC;IACrE,IAAI;MACA,IAAIgC,KAAK,GAAGnB,KAAK,CAACoB,IAAN,CAAWF,QAAX,CAAZ;MACA,OAAO,KAAKjC,QAAL,CAAckC,KAAd,EAAqBhC,eAArB,CAAP;IACH,CAHD,CAIA,OAAOkC,CAAP,EAAU;MACN;MACA,MAAM,CAAC,GAAGrE,mBAAmB,CAACsE,QAAxB,EAAkC,+BAA+BL,MAA/B,CAAsCI,CAAC,CAACE,OAAxC,EAAiD,IAAjD,EAAuDN,MAAvD,CAA8DC,QAA9D,CAAlC,CAAN;IACH;EACJ,CATD;EAUA;AACJ;AACA;AACA;AACA;;;EACIvE,MAAM,CAACqC,SAAP,CAAiB0B,UAAjB,GAA8B,UAAUC,SAAV,EAAqBa,cAArB,EAAqC;IAC/DA,cAAc,GAAGA,cAAc,IAAI,EAAnC;IACA,KAAKC,gBAAL,CAAsBD,cAAc,CAACtB,MAArC,EAA6CS,SAA7C;;IACA,KAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqB,cAAc,CAACtB,MAAnC,EAA2CC,CAAC,EAA5C,EAAgD;MAC5CqB,cAAc,CAACrB,CAAD,CAAd;IACH;EACJ,CAND;;EAOAxD,MAAM,CAACqC,SAAP,CAAiBW,WAAjB,GAA+B,UAAUT,CAAV,EAAa;IACxC,IAAIwC,IAAI,GAAGxC,CAAC,CAACwC,IAAb;IACA,IAAIC,GAAG,GAAGzC,CAAC,CAACyC,GAAZ;;IACA,IAAIzC,CAAC,CAAC0C,kBAAF,CAAqB,CAAC,IAAtB,KAA+B1C,CAAC,CAAC2C,QAAF,CAAW,IAAX,CAAnC,EAAqD;MACjD,KAAK/C,GAAL,CAASgD,SAAT,CAAmBH,GAAnB;IACH,CAFD,MAGK,IAAIzC,CAAC,CAAC0C,kBAAF,CAAqB,CAAC,IAAtB,KAA+B1C,CAAC,CAAC2C,QAAF,CAAW,CAAC,IAAZ,CAAnC,EAAsD;MACvD,KAAK/C,GAAL,CAASU,UAAT,CAAoB7B,KAApB;;MACA,KAAKmB,GAAL,CAASgD,SAAT,CAAmBH,GAAnB;IACH,CAHI,MAIA,IAAIzC,CAAC,CAAC0C,kBAAF,CAAqB,CAAC,MAAtB,KAAiC1C,CAAC,CAAC2C,QAAF,CAAW,MAAX,CAArC,EAAyD;MAC1D,KAAK/C,GAAL,CAASU,UAAT,CAAoB5B,MAApB;;MACA,KAAKkB,GAAL,CAASiD,UAAT,CAAoBJ,GAApB;IACH,CAHI,MAIA,IAAIzC,CAAC,CAAC0C,kBAAF,CAAqB,CAAC,UAAtB,KAAqC1C,CAAC,CAAC2C,QAAF,CAAW,UAAX,CAAzC,EAAiE;MAClE,KAAK/C,GAAL,CAASU,UAAT,CAAoB3B,MAApB;;MACA,KAAKiB,GAAL,CAASkD,UAAT,CAAoBL,GAApB;IACH,CAHI,MAIA;MACD,KAAK7C,GAAL,CAASU,UAAT,CAAoB1B,MAApB;;MACA,KAAKgB,GAAL,CAASkD,UAAT,CAAoBN,IAApB;;MACA,KAAK5C,GAAL,CAASkD,UAAT,CAAoBL,GAApB;IACH;EACJ,CAvBD;;EAwBAhF,MAAM,CAACqC,SAAP,CAAiBS,SAAjB,GAA6B,UAAUP,CAAV,EAAa;IACtC,KAAKJ,GAAL,CAASU,UAAT,CAAoBhC,QAApB;;IACA,KAAKsB,GAAL,CAASmD,YAAT,CAAsB/C,CAAtB;EACH,CAHD;;EAIAvC,MAAM,CAACqC,SAAP,CAAiBU,UAAjB,GAA8B,UAAUR,CAAV,EAAa;IACvC,IAAIgD,KAAK,GAAGtF,SAAS,CAACuF,IAAV,CAAeC,MAAf,CAAsBlD,CAAtB,CAAZ;IACA,IAAImD,IAAI,GAAGH,KAAK,CAAChC,MAAjB;;IACA,IAAImC,IAAI,GAAG,IAAX,EAAiB;MACb,KAAKvD,GAAL,CAASU,UAAT,CAAoBrC,WAAW,GAAGkF,IAAlC;;MACA,KAAKvD,GAAL,CAASwD,UAAT,CAAoBJ,KAApB;IACH,CAHD,MAIK,IAAIG,IAAI,GAAG,KAAX,EAAkB;MACnB,KAAKvD,GAAL,CAASU,UAAT,CAAoBzB,QAApB;;MACA,KAAKe,GAAL,CAASU,UAAT,CAAoB6C,IAApB;;MACA,KAAKvD,GAAL,CAASwD,UAAT,CAAoBJ,KAApB;IACH,CAJI,MAKA,IAAIG,IAAI,GAAG,OAAX,EAAoB;MACrB,KAAKvD,GAAL,CAASU,UAAT,CAAoBxB,SAApB;;MACA,KAAKc,GAAL,CAASU,UAAT,CAAqB6C,IAAI,GAAG,GAAR,IAAgB,CAApC;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;;MACA,KAAKvD,GAAL,CAASwD,UAAT,CAAoBJ,KAApB;IACH,CALI,MAMA,IAAIG,IAAI,GAAG,WAAX,EAAwB;MACzB,KAAKvD,GAAL,CAASU,UAAT,CAAoBvB,SAApB;;MACA,KAAKa,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,QAAR,IAAqB,CAAtB,IAA2B,GAA/C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,KAAR,IAAkB,CAAnB,IAAwB,GAA5C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,GAAR,IAAgB,CAAjB,IAAsB,GAA1C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;;MACA,KAAKvD,GAAL,CAASwD,UAAT,CAAoBJ,KAApB;IACH,CAPI,MAQA;MACD,MAAM,CAAC,GAAGlF,mBAAmB,CAACsE,QAAxB,EAAkC,2BAA2Be,IAA3B,GAAkC,oBAApE,CAAN;IACH;EACJ,CA7BD;;EA8BA1F,MAAM,CAACqC,SAAP,CAAiBiB,cAAjB,GAAkC,UAAUoC,IAAV,EAAgB;IAC9C,IAAIA,IAAI,GAAG,IAAX,EAAiB;MACb,KAAKvD,GAAL,CAASU,UAAT,CAAoBpC,SAAS,GAAGiF,IAAhC;IACH,CAFD,MAGK,IAAIA,IAAI,GAAG,KAAX,EAAkB;MACnB,KAAKvD,GAAL,CAASU,UAAT,CAAoBtB,MAApB;;MACA,KAAKY,GAAL,CAASU,UAAT,CAAoB6C,IAApB;IACH,CAHI,MAIA,IAAIA,IAAI,GAAG,OAAX,EAAoB;MACrB,KAAKvD,GAAL,CAASU,UAAT,CAAoBrB,OAApB;;MACA,KAAKW,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,GAAR,IAAgB,CAAjB,IAAsB,GAA1C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;IACH,CAJI,MAKA,IAAIA,IAAI,GAAG,WAAX,EAAwB;MACzB,KAAKvD,GAAL,CAASU,UAAT,CAAoBpB,OAApB;;MACA,KAAKU,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,QAAR,IAAqB,CAAtB,IAA2B,GAA/C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,KAAR,IAAkB,CAAnB,IAAwB,GAA5C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,GAAR,IAAgB,CAAjB,IAAsB,GAA1C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;IACH,CANI,MAOA;MACD,MAAM,CAAC,GAAGrF,mBAAmB,CAACsE,QAAxB,EAAkC,mBAAmBe,IAAnB,GAA0B,oBAA5D,CAAN;IACH;EACJ,CAvBD;;EAwBA1F,MAAM,CAACqC,SAAP,CAAiBe,SAAjB,GAA6B,UAAUoB,KAAV,EAAiB;IAC1C,IAAI,KAAKpC,oBAAT,EAA+B;MAC3B,KAAKwD,eAAL,CAAqBpB,KAAK,CAACjB,MAA3B;;MACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgB,KAAK,CAACjB,MAA1B,EAAkCC,CAAC,EAAnC,EAAuC;QACnC,KAAKrB,GAAL,CAASgD,SAAT,CAAmBX,KAAK,CAAChB,CAAD,CAAxB;MACH;IACJ,CALD,MAMK;MACD,MAAM,CAAC,GAAGnD,mBAAmB,CAACsE,QAAxB,EAAkC,2EAAlC,CAAN;IACH;EACJ,CAVD;;EAWA3E,MAAM,CAACqC,SAAP,CAAiBuD,eAAjB,GAAmC,UAAUF,IAAV,EAAgB;IAC/C,IAAIA,IAAI,GAAG,KAAX,EAAkB;MACd,KAAKvD,GAAL,CAASU,UAAT,CAAoBnB,OAApB;;MACA,KAAKS,GAAL,CAASU,UAAT,CAAoB6C,IAApB;IACH,CAHD,MAIK,IAAIA,IAAI,GAAG,OAAX,EAAoB;MACrB,KAAKvD,GAAL,CAASU,UAAT,CAAoBlB,QAApB;;MACA,KAAKQ,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,GAAR,IAAgB,CAAjB,IAAsB,GAA1C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;IACH,CAJI,MAKA,IAAIA,IAAI,GAAG,WAAX,EAAwB;MACzB,KAAKvD,GAAL,CAASU,UAAT,CAAoBjB,QAApB;;MACA,KAAKO,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,QAAR,IAAqB,CAAtB,IAA2B,GAA/C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,KAAR,IAAkB,CAAnB,IAAwB,GAA5C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,GAAR,IAAgB,CAAjB,IAAsB,GAA1C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;IACH,CANI,MAOA;MACD,MAAM,CAAC,GAAGrF,mBAAmB,CAACsE,QAAxB,EAAkC,yBAAyBe,IAAzB,GAAgC,oBAAlE,CAAN;IACH;EACJ,CApBD;;EAqBA1F,MAAM,CAACqC,SAAP,CAAiB8B,aAAjB,GAAiC,UAAUuB,IAAV,EAAgB;IAC7C,IAAIA,IAAI,GAAG,IAAX,EAAiB;MACb,KAAKvD,GAAL,CAASU,UAAT,CAAoBnC,QAAQ,GAAGgF,IAA/B;IACH,CAFD,MAGK,IAAIA,IAAI,GAAG,KAAX,EAAkB;MACnB,KAAKvD,GAAL,CAASU,UAAT,CAAoBhB,KAApB;;MACA,KAAKM,GAAL,CAASU,UAAT,CAAoB6C,IAApB;IACH,CAHI,MAIA,IAAIA,IAAI,GAAG,OAAX,EAAoB;MACrB,KAAKvD,GAAL,CAASU,UAAT,CAAoBf,MAApB;;MACA,KAAKK,GAAL,CAASU,UAAT,CAAqB6C,IAAI,GAAG,GAAR,IAAgB,CAApC;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;IACH,CAJI,MAKA,IAAIA,IAAI,GAAG,WAAX,EAAwB;MACzB,KAAKvD,GAAL,CAASU,UAAT,CAAoBd,MAApB;;MACA,KAAKI,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,QAAR,IAAqB,CAAtB,IAA2B,GAA/C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,KAAR,IAAkB,CAAnB,IAAwB,GAA5C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB,CAAE6C,IAAI,GAAG,GAAR,IAAgB,CAAjB,IAAsB,GAA1C;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;IACH,CANI,MAOA;MACD,MAAM,CAAC,GAAGrF,mBAAmB,CAACsE,QAAxB,EAAkC,kBAAkBe,IAAlB,GAAyB,oBAA3D,CAAN;IACH;EACJ,CAvBD;;EAwBA1F,MAAM,CAACqC,SAAP,CAAiByC,gBAAjB,GAAoC,UAAUY,IAAV,EAAgB1B,SAAhB,EAA2B;IAC3D,IAAI0B,IAAI,GAAG,IAAX,EAAiB;MACb,KAAKvD,GAAL,CAASU,UAAT,CAAoBlC,WAAW,GAAG+E,IAAlC;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoBmB,SAApB;IACH,CAHD,MAIK,IAAI0B,IAAI,GAAG,KAAX,EAAkB;MACnB,KAAKvD,GAAL,CAASU,UAAT,CAAoBb,QAApB;;MACA,KAAKG,GAAL,CAASU,UAAT,CAAoB6C,IAApB;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoBmB,SAApB;IACH,CAJI,MAKA,IAAI0B,IAAI,GAAG,OAAX,EAAoB;MACrB,KAAKvD,GAAL,CAASU,UAAT,CAAoBZ,SAApB;;MACA,KAAKE,GAAL,CAASU,UAAT,CAAqB6C,IAAI,GAAG,GAAR,IAAgB,CAApC;;MACA,KAAKvD,GAAL,CAASU,UAAT,CAAoB6C,IAAI,GAAG,GAA3B;IACH,CAJI,MAKA;MACD,MAAM,CAAC,GAAGrF,mBAAmB,CAACsE,QAAxB,EAAkC,wBAAwBe,IAAxB,GAA+B,oBAAjE,CAAN;IACH;EACJ,CAlBD;;EAmBA1F,MAAM,CAACqC,SAAP,CAAiBwD,iBAAjB,GAAqC,YAAY;IAC7C,KAAKzD,oBAAL,GAA4B,KAA5B;EACH,CAFD;;EAGApC,MAAM,CAACqC,SAAP,CAAiBgC,iBAAjB,GAAqC,UAAUO,OAAV,EAAmB;IACpD,OAAO,YAAY;MACf,MAAM,CAAC,GAAGvE,mBAAmB,CAACsE,QAAxB,EAAkCC,OAAlC,EAA2CtE,cAA3C,CAAN;IACH,CAFD;EAGH,CAJD;;EAKA,OAAON,MAAP;AACH,CApR2B,EAA5B;;AAqRAH,OAAO,CAACG,MAAR,GAAiBA,MAAjB;AACA;AACA;AACA;AACA;;AACA,IAAID,QAAQ;AAAG;AAAe,YAAY;EACtC;AACJ;AACA;AACA;AACA;EACI,SAASA,QAAT,CAAkB+F,uBAAlB,EAA2CC,SAA3C,EAAsD;IAClD,IAAID,uBAAuB,KAAK,KAAK,CAArC,EAAwC;MAAEA,uBAAuB,GAAG,KAA1B;IAAkC;;IAC5E,IAAIC,SAAS,KAAK,KAAK,CAAvB,EAA0B;MAAEA,SAAS,GAAG,KAAZ;IAAoB;;IAChD,KAAKC,wBAAL,GAAgCF,uBAAhC;IACA,KAAKG,UAAL,GAAkBF,SAAlB;EACH;;EACDhG,QAAQ,CAACsC,SAAT,CAAmB6D,MAAnB,GAA4B,UAAUC,MAAV,EAAkBC,gBAAlB,EAAoC;IAC5D,IAAIA,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;MAAEA,gBAAgB,GAAGjG,MAAM,CAACuC,UAAP,CAAkBC,QAArC;IAAgD;;IACnF,IAAI0D,MAAM,GAAGF,MAAM,CAACG,SAAP,EAAb;IACA,IAAIC,UAAU,GAAGF,MAAM,GAAG,IAA1B;IACA,IAAIG,SAAS,GAAGH,MAAM,GAAG,IAAzB;;IACA,IAAIA,MAAM,KAAKzF,IAAf,EAAqB;MACjB,OAAO,IAAP;IACH;;IACD,IAAI6F,OAAO,GAAG,KAAKC,cAAL,CAAoBL,MAApB,CAAd;;IACA,IAAII,OAAO,KAAK,IAAhB,EAAsB;MAClB,OAAOA,OAAP;IACH;;IACD,IAAIE,eAAe,GAAG,KAAKC,sBAAL,CAA4BP,MAA5B,EAAoCF,MAApC,CAAtB;;IACA,IAAIQ,eAAe,KAAK,IAAxB,EAA8B;MAC1B,IAAI,CAAC,GAAGtG,mBAAmB,CAAC6C,KAAxB,EAA+ByD,eAA/B,CAAJ,EAAqD;QACjD,IAAI,KAAKV,UAAT,EAAqB;UACjB,OAAOU,eAAe,CAACE,QAAhB,EAAP;QACH,CAFD,MAGK,IAAI,KAAKb,wBAAT,EAAmC;UACpC,OAAOW,eAAe,CAACG,kBAAhB,EAAP;QACH;MACJ;;MACD,OAAOH,eAAP;IACH;;IACD,IAAII,MAAM,GAAG,KAAKC,aAAL,CAAmBX,MAAnB,EAA2BE,UAA3B,EAAuCC,SAAvC,EAAkDL,MAAlD,CAAb;;IACA,IAAIY,MAAM,KAAK,IAAf,EAAqB;MACjB,OAAOA,MAAP;IACH;;IACD,IAAIE,IAAI,GAAG,KAAKC,WAAL,CAAiBb,MAAjB,EAAyBE,UAAzB,EAAqCC,SAArC,EAAgDL,MAAhD,EAAwDC,gBAAxD,CAAX;;IACA,IAAIa,IAAI,KAAK,IAAb,EAAmB;MACf,OAAOA,IAAP;IACH;;IACD,IAAIE,SAAS,GAAG,KAAKC,gBAAL,CAAsBf,MAAtB,EAA8BF,MAA9B,CAAhB;;IACA,IAAIgB,SAAS,KAAK,IAAlB,EAAwB;MACpB,OAAOA,SAAP;IACH;;IACD,IAAIE,GAAG,GAAG,KAAKC,UAAL,CAAgBjB,MAAhB,EAAwBE,UAAxB,EAAoCC,SAApC,EAA+CL,MAA/C,EAAuDC,gBAAvD,CAAV;;IACA,IAAIiB,GAAG,KAAK,IAAZ,EAAkB;MACd,OAAOA,GAAP;IACH;;IACD,IAAIE,MAAM,GAAG,KAAKC,aAAL,CAAmBnB,MAAnB,EAA2BE,UAA3B,EAAuCC,SAAvC,EAAkDL,MAAlD,EAA0DC,gBAA1D,CAAb;;IACA,IAAImB,MAAM,KAAK,IAAf,EAAqB;MACjB,OAAOA,MAAP;IACH;;IACD,MAAM,CAAC,GAAGlH,mBAAmB,CAACsE,QAAxB,EAAkC,sCAAsC0B,MAAM,CAACoB,QAAP,CAAgB,EAAhB,CAAxE,CAAN;EACH,CA7CD;;EA8CA1H,QAAQ,CAACsC,SAAT,CAAmBqF,aAAnB,GAAmC,UAAUvB,MAAV,EAAkB;IACjD,IAAIE,MAAM,GAAGF,MAAM,CAACG,SAAP,EAAb;;IACA,IAAIqB,MAAM,GAAG,KAAKC,cAAL,CAAoBvB,MAApB,EAA4BF,MAA5B,CAAb;;IACA,IAAIwB,MAAM,IAAI,IAAd,EAAoB;MAChB,MAAM,CAAC,GAAGtH,mBAAmB,CAACsE,QAAxB,EAAkC,gDAAgD0B,MAAM,CAACoB,QAAP,CAAgB,EAAhB,CAAlF,CAAN;IACH;;IACD,OAAOE,MAAP;EACH,CAPD;;EAQA5H,QAAQ,CAACsC,SAAT,CAAmBqE,cAAnB,GAAoC,UAAUL,MAAV,EAAkB;IAClD,IAAIA,MAAM,KAAKtF,IAAf,EAAqB;MACjB,OAAO,IAAP;IACH,CAFD,MAGK,IAAIsF,MAAM,KAAKvF,KAAf,EAAsB;MACvB,OAAO,KAAP;IACH,CAFI,MAGA;MACD,OAAO,IAAP;IACH;EACJ,CAVD;;EAWAf,QAAQ,CAACsC,SAAT,CAAmBuE,sBAAnB,GAA4C,UAAUP,MAAV,EAAkBF,MAAlB,EAA0B;IAClE,IAAIE,MAAM,KAAKxF,QAAf,EAAyB;MACrB,OAAOsF,MAAM,CAAC0B,WAAP,EAAP;IACH,CAFD,MAGK;MACD,OAAO,KAAKD,cAAL,CAAoBvB,MAApB,EAA4BF,MAA5B,CAAP;IACH;EACJ,CAPD;;EAQApG,QAAQ,CAACsC,SAAT,CAAmBuF,cAAnB,GAAoC,UAAUvB,MAAV,EAAkBF,MAAlB,EAA0B;IAC1D,IAAIE,MAAM,IAAI,CAAV,IAAeA,MAAM,GAAG,GAA5B,EAAiC;MAC7B,OAAO,CAAC,GAAGhG,mBAAmB,CAAC4C,GAAxB,EAA6BoD,MAA7B,CAAP;IACH,CAFD,MAGK,IAAIA,MAAM,IAAI,GAAV,IAAiBA,MAAM,GAAG,GAA9B,EAAmC;MACpC,OAAO,CAAC,GAAGhG,mBAAmB,CAAC4C,GAAxB,EAA6BoD,MAAM,GAAG,GAAtC,CAAP;IACH,CAFI,MAGA,IAAIA,MAAM,KAAKrF,KAAf,EAAsB;MACvB,OAAO,CAAC,GAAGX,mBAAmB,CAAC4C,GAAxB,EAA6BkD,MAAM,CAAC2B,QAAP,EAA7B,CAAP;IACH,CAFI,MAGA,IAAIzB,MAAM,KAAKpF,MAAf,EAAuB;MACxB,OAAO,CAAC,GAAGZ,mBAAmB,CAAC4C,GAAxB,EAA6BkD,MAAM,CAAC4B,SAAP,EAA7B,CAAP;IACH,CAFI,MAGA,IAAI1B,MAAM,KAAKnF,MAAf,EAAuB;MACxB,IAAI8G,CAAC,GAAG7B,MAAM,CAAC8B,SAAP,EAAR;MACA,OAAO,CAAC,GAAG5H,mBAAmB,CAAC4C,GAAxB,EAA6B+E,CAA7B,CAAP;IACH,CAHI,MAIA,IAAI3B,MAAM,KAAKlF,MAAf,EAAuB;MACxB,IAAI4D,IAAI,GAAGoB,MAAM,CAAC8B,SAAP,EAAX;MACA,IAAIjD,GAAG,GAAGmB,MAAM,CAAC8B,SAAP,EAAV;MACA,OAAO,IAAI5H,mBAAmB,CAAC6H,OAAxB,CAAgClD,GAAhC,EAAqCD,IAArC,CAAP;IACH,CAJI,MAKA;MACD,OAAO,IAAP;IACH;EACJ,CAzBD;;EA0BAhF,QAAQ,CAACsC,SAAT,CAAmB2E,aAAnB,GAAmC,UAAUX,MAAV,EAAkBE,UAAlB,EAA8BC,SAA9B,EAAyCL,MAAzC,EAAiD;IAChF,IAAII,UAAU,KAAK/F,WAAnB,EAAgC;MAC5B,OAAOP,SAAS,CAACuF,IAAV,CAAe2C,MAAf,CAAsBhC,MAAtB,EAA8BK,SAA9B,CAAP;IACH,CAFD,MAGK,IAAIH,MAAM,KAAKjF,QAAf,EAAyB;MAC1B,OAAOnB,SAAS,CAACuF,IAAV,CAAe2C,MAAf,CAAsBhC,MAAtB,EAA8BA,MAAM,CAACG,SAAP,EAA9B,CAAP;IACH,CAFI,MAGA,IAAID,MAAM,KAAKhF,SAAf,EAA0B;MAC3B,OAAOpB,SAAS,CAACuF,IAAV,CAAe2C,MAAf,CAAsBhC,MAAtB,EAA8BA,MAAM,CAACiC,UAAP,EAA9B,CAAP;IACH,CAFI,MAGA,IAAI/B,MAAM,KAAK/E,SAAf,EAA0B;MAC3B,OAAOrB,SAAS,CAACuF,IAAV,CAAe2C,MAAf,CAAsBhC,MAAtB,EAA8BA,MAAM,CAACkC,UAAP,EAA9B,CAAP;IACH,CAFI,MAGA;MACD,OAAO,IAAP;IACH;EACJ,CAhBD;;EAiBAtI,QAAQ,CAACsC,SAAT,CAAmB6E,WAAnB,GAAiC,UAAUb,MAAV,EAAkBE,UAAlB,EAA8BC,SAA9B,EAAyCL,MAAzC,EAAiDC,gBAAjD,EAAmE;IAChG,IAAIG,UAAU,KAAK9F,SAAnB,EAA8B;MAC1B,OAAO,KAAK6H,mBAAL,CAAyB9B,SAAzB,EAAoCL,MAApC,EAA4CC,gBAA5C,CAAP;IACH,CAFD,MAGK,IAAIC,MAAM,KAAK9E,MAAf,EAAuB;MACxB,OAAO,KAAK+G,mBAAL,CAAyBnC,MAAM,CAACG,SAAP,EAAzB,EAA6CH,MAA7C,EAAqDC,gBAArD,CAAP;IACH,CAFI,MAGA,IAAIC,MAAM,KAAK7E,OAAf,EAAwB;MACzB,OAAO,KAAK8G,mBAAL,CAAyBnC,MAAM,CAACiC,UAAP,EAAzB,EAA8CjC,MAA9C,EAAsDC,gBAAtD,CAAP;IACH,CAFI,MAGA,IAAIC,MAAM,KAAK5E,OAAf,EAAwB;MACzB,OAAO,KAAK6G,mBAAL,CAAyBnC,MAAM,CAACkC,UAAP,EAAzB,EAA8ClC,MAA9C,EAAsDC,gBAAtD,CAAP;IACH,CAFI,MAGA;MACD,OAAO,IAAP;IACH;EACJ,CAhBD;;EAiBArG,QAAQ,CAACsC,SAAT,CAAmBiG,mBAAnB,GAAyC,UAAU5C,IAAV,EAAgBS,MAAhB,EAAwBC,gBAAxB,EAA0C;IAC/E,IAAItG,KAAK,GAAG,EAAZ;;IACA,KAAK,IAAI0D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkC,IAApB,EAA0BlC,CAAC,EAA3B,EAA+B;MAC3B1D,KAAK,CAACyI,IAAN,CAAW,KAAKrC,MAAL,CAAYC,MAAZ,EAAoBC,gBAApB,CAAX;IACH;;IACD,OAAOtG,KAAP;EACH,CAND;;EAOAC,QAAQ,CAACsC,SAAT,CAAmB+E,gBAAnB,GAAsC,UAAUf,MAAV,EAAkBF,MAAlB,EAA0B;IAC5D,IAAIE,MAAM,KAAK3E,OAAf,EAAwB;MACpB,OAAO,KAAK8G,wBAAL,CAA8BrC,MAAM,CAACG,SAAP,EAA9B,EAAkDH,MAAlD,CAAP;IACH,CAFD,MAGK,IAAIE,MAAM,KAAK1E,QAAf,EAAyB;MAC1B,OAAO,KAAK6G,wBAAL,CAA8BrC,MAAM,CAACiC,UAAP,EAA9B,EAAmDjC,MAAnD,CAAP;IACH,CAFI,MAGA,IAAIE,MAAM,KAAKzE,QAAf,EAAyB;MAC1B,OAAO,KAAK4G,wBAAL,CAA8BrC,MAAM,CAACkC,UAAP,EAA9B,EAAmDlC,MAAnD,CAAP;IACH,CAFI,MAGA;MACD,OAAO,IAAP;IACH;EACJ,CAbD;;EAcApG,QAAQ,CAACsC,SAAT,CAAmBmG,wBAAnB,GAA8C,UAAU9C,IAAV,EAAgBS,MAAhB,EAAwB;IAClE,IAAIrG,KAAK,GAAG,IAAIqD,SAAJ,CAAcuC,IAAd,CAAZ;;IACA,KAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkC,IAApB,EAA0BlC,CAAC,EAA3B,EAA+B;MAC3B1D,KAAK,CAAC0D,CAAD,CAAL,GAAW2C,MAAM,CAAC2B,QAAP,EAAX;IACH;;IACD,OAAOhI,KAAP;EACH,CAND;;EAOAC,QAAQ,CAACsC,SAAT,CAAmBiF,UAAnB,GAAgC,UAAUjB,MAAV,EAAkBE,UAAlB,EAA8BC,SAA9B,EAAyCL,MAAzC,EAAiDC,gBAAjD,EAAmE;IAC/F,IAAIG,UAAU,KAAK7F,QAAnB,EAA6B;MACzB,OAAO,KAAK+H,kBAAL,CAAwBjC,SAAxB,EAAmCL,MAAnC,EAA2CC,gBAA3C,CAAP;IACH,CAFD,MAGK,IAAIC,MAAM,KAAKxE,KAAf,EAAsB;MACvB,OAAO,KAAK4G,kBAAL,CAAwBtC,MAAM,CAACG,SAAP,EAAxB,EAA4CH,MAA5C,EAAoDC,gBAApD,CAAP;IACH,CAFI,MAGA,IAAIC,MAAM,KAAKvE,MAAf,EAAuB;MACxB,OAAO,KAAK2G,kBAAL,CAAwBtC,MAAM,CAACiC,UAAP,EAAxB,EAA6CjC,MAA7C,EAAqDC,gBAArD,CAAP;IACH,CAFI,MAGA,IAAIC,MAAM,KAAKtE,MAAf,EAAuB;MACxB,OAAO,KAAK0G,kBAAL,CAAwBtC,MAAM,CAACkC,UAAP,EAAxB,EAA6ClC,MAA7C,EAAqDC,gBAArD,CAAP;IACH,CAFI,MAGA;MACD,OAAO,IAAP;IACH;EACJ,CAhBD;;EAiBArG,QAAQ,CAACsC,SAAT,CAAmBoG,kBAAnB,GAAwC,UAAU/C,IAAV,EAAgBS,MAAhB,EAAwBC,gBAAxB,EAA0C;IAC9E,IAAItG,KAAK,GAAG,EAAZ;;IACA,KAAK,IAAI0D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkC,IAApB,EAA0BlC,CAAC,EAA3B,EAA+B;MAC3B,IAAIY,GAAG,GAAG,KAAK8B,MAAL,CAAYC,MAAZ,EAAoBC,gBAApB,CAAV;MACAtG,KAAK,CAACsE,GAAD,CAAL,GAAa,KAAK8B,MAAL,CAAYC,MAAZ,EAAoBC,gBAApB,CAAb;IACH;;IACD,OAAOtG,KAAP;EACH,CAPD;;EAQAC,QAAQ,CAACsC,SAAT,CAAmBmF,aAAnB,GAAmC,UAAUnB,MAAV,EAAkBE,UAAlB,EAA8BC,SAA9B,EAAyCL,MAAzC,EAAiDC,gBAAjD,EAAmE;IAClG,IAAIG,UAAU,KAAK5F,WAAnB,EAAgC;MAC5B,OAAO,KAAK+H,qBAAL,CAA2BlC,SAA3B,EAAsCL,MAAtC,EAA8CC,gBAA9C,CAAP;IACH,CAFD,MAGK,IAAIC,MAAM,KAAKrE,QAAf,EAAyB;MAC1B,OAAO,KAAK0G,qBAAL,CAA2BvC,MAAM,CAACG,SAAP,EAA3B,EAA+CH,MAA/C,EAAuDC,gBAAvD,CAAP;IACH,CAFI,MAGA,IAAIC,MAAM,KAAKpE,SAAf,EAA0B;MAC3B,OAAO,KAAKyG,qBAAL,CAA2BvC,MAAM,CAACiC,UAAP,EAA3B,EAAgDjC,MAAhD,EAAwDC,gBAAxD,CAAP;IACH,CAFI,MAGA;MACD,OAAO,IAAP;IACH;EACJ,CAbD;;EAcArG,QAAQ,CAACsC,SAAT,CAAmBqG,qBAAnB,GAA2C,UAAUC,UAAV,EAAsBxC,MAAtB,EAA8BC,gBAA9B,EAAgD;IACvF,IAAIpC,SAAS,GAAGmC,MAAM,CAACG,SAAP,EAAhB;IACA,IAAIsC,SAAS,GAAG,IAAIxI,WAAW,CAACwD,SAAhB,CAA0BI,SAA1B,EAAqC,EAArC,CAAhB;;IACA,KAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmF,UAApB,EAAgCnF,CAAC,EAAjC,EAAqC;MACjCoF,SAAS,CAAC9E,MAAV,CAAiByE,IAAjB,CAAsB,KAAKrC,MAAL,CAAYC,MAAZ,EAAoBC,gBAApB,CAAtB;IACH;;IACD,OAAOA,gBAAgB,CAACwC,SAAD,CAAvB;EACH,CAPD;;EAQA,OAAO7I,QAAP;AACH,CA7N6B,EAA9B;;AA8NAF,OAAO,CAACE,QAAR,GAAmBA,QAAnB;;AACA,SAAS2D,UAAT,CAAoBmF,GAApB,EAAyB;EACrB,IAAIA,GAAG,IAAI,IAAX,EAAiB;IACb,OAAO,KAAP;EACH;;EACD,OAAO,OAAOA,GAAG,CAACC,MAAM,CAACC,QAAR,CAAV,KAAgC,UAAvC;AACH"},"metadata":{},"sourceType":"script"}